function Swipe(container,options){"use strict";function setup(){slides=element.children,length=slides.length,slides.length<2&&(options.continuous=!1),browser.transitions&&options.continuous&&slides.length<3&&(element.appendChild(slides[0].cloneNode(!0)),element.appendChild(element.children[1].cloneNode(!0)),slides=element.children),slidePos=new Array(slides.length),width=container.getBoundingClientRect().width||container.offsetWidth,element.style.width=slides.length*width+"px";for(var pos=slides.length;pos--;){var slide=slides[pos];slide.style.width=width+"px",slide.setAttribute("data-index",pos),browser.transitions&&(slide.style.left=pos*-width+"px",move(pos,index>pos?-width:pos>index?width:0,0))}options.continuous&&browser.transitions&&(move(circle(index-1),-width,0),move(circle(index+1),width,0)),browser.transitions||(element.style.left=index*-width+"px"),container.style.visibility="visible"}function prev(){options.continuous?slide(index-1):index&&slide(index-1)}function next(){options.continuous?slide(index+1):index<slides.length-1&&slide(index+1)}function circle(index){return(slides.length+index%slides.length)%slides.length}function slide(to,slideSpeed){if(index!=to){if(browser.transitions){var direction=Math.abs(index-to)/(index-to);if(options.continuous){var natural_direction=direction;direction=-slidePos[circle(to)]/width,direction!==natural_direction&&(to=-direction*slides.length+to)}for(var diff=Math.abs(index-to)-1;diff--;)move(circle((to>index?to:index)-diff-1),width*direction,0);to=circle(to),move(index,width*direction,slideSpeed||speed),move(to,0,slideSpeed||speed),options.continuous&&move(circle(to-direction),-(width*direction),0)}else to=circle(to),animate(index*-width,to*-width,slideSpeed||speed);index=to,offloadFn(options.callback&&options.callback(index,slides[index]))}}function move(index,dist,speed){translate(index,dist,speed),slidePos[index]=dist}function translate(index,dist,speed){var slide=slides[index],style=slide&&slide.style;style&&(style.webkitTransitionDuration=style.MozTransitionDuration=style.msTransitionDuration=style.OTransitionDuration=style.transitionDuration=speed+"ms",style.webkitTransform="translate("+dist+"px,0)translateZ(0)",style.msTransform=style.MozTransform=style.OTransform="translateX("+dist+"px)")}function animate(from,to,speed){if(!speed)return void(element.style.left=to+"px");var start=+new Date,timer=setInterval(function(){var timeElap=+new Date-start;return timeElap>speed?(element.style.left=to+"px",delay&&begin(),options.transitionEnd&&options.transitionEnd.call(event,index,slides[index]),void clearInterval(timer)):void(element.style.left=(to-from)*(Math.floor(timeElap/speed*100)/100)+from+"px")},4)}function begin(){interval=setTimeout(next,delay)}function stop(){delay=0,clearTimeout(interval)}var noop=function(){},offloadFn=function(fn){setTimeout(fn||noop,0)},browser={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(temp){var props=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var i in props)if(void 0!==temp.style[props[i]])return!0;return!1}(document.createElement("swipe"))};if(container){var slides,slidePos,width,length,element=container.children[0];options=options||{};var index=parseInt(options.startSlide,10)||0,speed=options.speed||300;options.continuous=void 0!==options.continuous?options.continuous:!0;var interval,isScrolling,delay=options.auto||0,start={},delta={},events={handleEvent:function(event){switch(event.type){case"touchstart":this.start(event);break;case"touchmove":this.move(event);break;case"touchend":offloadFn(this.end(event));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":offloadFn(this.transitionEnd(event));break;case"resize":offloadFn(setup)}options.stopPropagation&&event.stopPropagation()},start:function(event){var touches=event.touches[0];start={x:touches.pageX,y:touches.pageY,time:+new Date},isScrolling=void 0,delta={},element.addEventListener("touchmove",this,!1),element.addEventListener("touchend",this,!1)},move:function(event){if(!(event.touches.length>1||event.scale&&1!==event.scale)){options.disableScroll&&event.preventDefault();var touches=event.touches[0];delta={x:touches.pageX-start.x,y:touches.pageY-start.y},"undefined"==typeof isScrolling&&(isScrolling=!!(isScrolling||Math.abs(delta.x)<Math.abs(delta.y))),isScrolling||(event.preventDefault(),stop(),options.continuous?(translate(circle(index-1),delta.x+slidePos[circle(index-1)],0),translate(index,delta.x+slidePos[index],0),translate(circle(index+1),delta.x+slidePos[circle(index+1)],0)):(delta.x=delta.x/(!index&&delta.x>0||index==slides.length-1&&delta.x<0?Math.abs(delta.x)/width+1:1),translate(index-1,delta.x+slidePos[index-1],0),translate(index,delta.x+slidePos[index],0),translate(index+1,delta.x+slidePos[index+1],0)))}},end:function(event){var duration=+new Date-start.time,isValidSlide=Number(duration)<250&&Math.abs(delta.x)>20||Math.abs(delta.x)>width/2,isPastBounds=!index&&delta.x>0||index==slides.length-1&&delta.x<0;options.continuous&&(isPastBounds=!1);var direction=delta.x<0;isScrolling||(isValidSlide&&!isPastBounds?(direction?(options.continuous?(move(circle(index-1),-width,0),move(circle(index+2),width,0)):move(index-1,-width,0),move(index,slidePos[index]-width,speed),move(circle(index+1),slidePos[circle(index+1)]-width,speed),index=circle(index+1)):(options.continuous?(move(circle(index+1),width,0),move(circle(index-2),-width,0)):move(index+1,width,0),move(index,slidePos[index]+width,speed),move(circle(index-1),slidePos[circle(index-1)]+width,speed),index=circle(index-1)),options.callback&&options.callback(index,slides[index])):options.continuous?(move(circle(index-1),-width,speed),move(index,0,speed),move(circle(index+1),width,speed)):(move(index-1,-width,speed),move(index,0,speed),move(index+1,width,speed))),element.removeEventListener("touchmove",events,!1),element.removeEventListener("touchend",events,!1)},transitionEnd:function(event){parseInt(event.target.getAttribute("data-index"),10)==index&&(delay&&begin(),options.transitionEnd&&options.transitionEnd.call(event,index,slides[index]))}};return setup(),delay&&begin(),browser.addEventListener?(browser.touch&&element.addEventListener("touchstart",events,!1),browser.transitions&&(element.addEventListener("webkitTransitionEnd",events,!1),element.addEventListener("msTransitionEnd",events,!1),element.addEventListener("oTransitionEnd",events,!1),element.addEventListener("otransitionend",events,!1),element.addEventListener("transitionend",events,!1)),window.addEventListener("resize",events,!1)):window.onresize=function(){setup()},{setup:function(){setup()},slide:function(to,speed){stop(),slide(to,speed)},prev:function(){stop(),prev()},next:function(){stop(),next()},stop:function(){stop()},getPos:function(){return index},getNumSlides:function(){return length},kill:function(){stop(),element.style.width="",element.style.left="";for(var pos=slides.length;pos--;){var slide=slides[pos];slide.style.width="",slide.style.left="",browser.transitions&&translate(pos,0,0)}browser.addEventListener?(element.removeEventListener("touchstart",events,!1),element.removeEventListener("webkitTransitionEnd",events,!1),element.removeEventListener("msTransitionEnd",events,!1),element.removeEventListener("oTransitionEnd",events,!1),element.removeEventListener("otransitionend",events,!1),element.removeEventListener("transitionend",events,!1),window.removeEventListener("resize",events,!1)):window.onresize=null}}}}!function($){function swipeDirection(x1,x2,y1,y2){return Math.abs(x1-x2)>=Math.abs(y1-y2)?x1-x2>0?"Left":"Right":y1-y2>0?"Up":"Down"}function longTap(){longTapTimeout=null,touch.last&&(touch.el.trigger("longTap"),touch={})}function cancelLongTap(){longTapTimeout&&clearTimeout(longTapTimeout),longTapTimeout=null}function cancelAll(){touchTimeout&&clearTimeout(touchTimeout),tapTimeout&&clearTimeout(tapTimeout),swipeTimeout&&clearTimeout(swipeTimeout),longTapTimeout&&clearTimeout(longTapTimeout),touchTimeout=tapTimeout=swipeTimeout=longTapTimeout=null,touch={}}function isPrimaryTouch(event){return event.pointerType==event.MSPOINTER_TYPE_TOUCH&&event.isPrimary}var touchTimeout,tapTimeout,swipeTimeout,longTapTimeout,gesture,touch={},longTapDelay=750;$(function(){var now,delta,firstTouch,deltaX=0,deltaY=0;"MSGesture"in window&&(gesture=new MSGesture,gesture.target=document.body),$(document).on("MSGestureEnd gestureend",function(e){var swipeDirectionFromVelocity=e.originalEvent.velocityX>1?"Right":e.originalEvent.velocityX<-1?"Left":e.originalEvent.velocityY>1?"Down":e.originalEvent.velocityY<-1?"Up":null;swipeDirectionFromVelocity&&(touch.el.trigger("swipe"),touch.el.trigger("swipe"+swipeDirectionFromVelocity))}).on("touchstart MSPointerDown pointerdown",function(e){("MSPointerDown"!=e.type||isPrimaryTouch(e.originalEvent))&&(firstTouch="MSPointerDown"==e.type||"pointerdown"==e.type?e:e.originalEvent.touches[0],now=Date.now(),delta=now-(touch.last||now),touch.el=$("tagName"in firstTouch.target?firstTouch.target:firstTouch.target.parentNode),touchTimeout&&clearTimeout(touchTimeout),touch.x1=firstTouch.pageX,touch.y1=firstTouch.pageY,delta>0&&250>=delta&&(touch.isDoubleTap=!0),touch.last=now,longTapTimeout=setTimeout(longTap,longTapDelay),!gesture||"MSPointerDown"!=e.type&&"pointerdown"!=e.type&&"touchstart"!=e.type||gesture.addPointer(e.originalEvent.pointerId))}).on("touchmove MSPointerMove pointermove",function(e){("MSPointerMove"!=e.type||isPrimaryTouch(e.originalEvent))&&(firstTouch="MSPointerMove"==e.type||"pointermove"==e.type?e:e.originalEvent.touches[0],cancelLongTap(),touch.x2=firstTouch.pageX,touch.y2=firstTouch.pageY,deltaX+=Math.abs(touch.x1-touch.x2),deltaY+=Math.abs(touch.y1-touch.y2))}).on("touchend MSPointerUp pointerup",function(e){("MSPointerUp"!=e.type||isPrimaryTouch(e.originalEvent))&&(cancelLongTap(),touch.x2&&Math.abs(touch.x1-touch.x2)>30||touch.y2&&Math.abs(touch.y1-touch.y2)>30?swipeTimeout=setTimeout(function(){touch.el.trigger("swipe"),touch.el.trigger("swipe"+swipeDirection(touch.x1,touch.x2,touch.y1,touch.y2)),touch={}},0):"last"in touch&&(isNaN(deltaX)||30>deltaX&&30>deltaY?tapTimeout=setTimeout(function(){var event=$.Event("tap");event.cancelTouch=cancelAll,touch.el.trigger(event),touch.isDoubleTap?(touch.el.trigger("doubleTap"),touch={}):touchTimeout=setTimeout(function(){touchTimeout=null,touch.el.trigger("singleTap"),touch={}},250)},0):touch={},deltaX=deltaY=0))}).on("touchcancel MSPointerCancel",cancelAll),$(window).on("scroll",cancelAll)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(eventName){$.fn[eventName]=function(callback){return $(this).on(eventName,callback)}})}(jQuery),function(window,document,exportName,undefined){"use strict";function setTimeoutContext(fn,timeout,context){return setTimeout(bindFn(fn,context),timeout)}function invokeArrayArg(arg,fn,context){return Array.isArray(arg)?(each(arg,context[fn],context),!0):!1}function each(obj,iterator,context){var i;if(obj)if(obj.forEach)obj.forEach(iterator,context);else if(obj.length!==undefined)for(i=0;i<obj.length;)iterator.call(context,obj[i],i,obj),i++;else for(i in obj)obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj)}function extend(dest,src,merge){for(var keys=Object.keys(src),i=0;i<keys.length;)(!merge||merge&&dest[keys[i]]===undefined)&&(dest[keys[i]]=src[keys[i]]),i++;return dest}function merge(dest,src){return extend(dest,src,!0)}function inherit(child,base,properties){var childP,baseP=base.prototype;childP=child.prototype=Object.create(baseP),childP.constructor=child,childP._super=baseP,properties&&extend(childP,properties)}function bindFn(fn,context){return function(){return fn.apply(context,arguments)}}function boolOrFn(val,args){return typeof val==TYPE_FUNCTION?val.apply(args?args[0]||undefined:undefined,args):val}function ifUndefined(val1,val2){return val1===undefined?val2:val1}function addEventListeners(target,types,handler){each(splitStr(types),function(type){target.addEventListener(type,handler,!1)})}function removeEventListeners(target,types,handler){each(splitStr(types),function(type){target.removeEventListener(type,handler,!1)})}function hasParent(node,parent){for(;node;){if(node==parent)return!0;node=node.parentNode}return!1}function inStr(str,find){return str.indexOf(find)>-1}function splitStr(str){return str.trim().split(/\s+/g)}function inArray(src,find,findByKey){if(src.indexOf&&!findByKey)return src.indexOf(find);for(var i=0;i<src.length;){if(findByKey&&src[i][findByKey]==find||!findByKey&&src[i]===find)return i;i++}return-1}function toArray(obj){return Array.prototype.slice.call(obj,0)}function uniqueArray(src,key,sort){for(var results=[],values=[],i=0;i<src.length;){var val=key?src[i][key]:src[i];inArray(values,val)<0&&results.push(src[i]),values[i]=val,i++}return sort&&(results=key?results.sort(function(a,b){return a[key]>b[key]}):results.sort()),results}function prefixed(obj,property){for(var prefix,prop,camelProp=property[0].toUpperCase()+property.slice(1),i=0;i<VENDOR_PREFIXES.length;){if(prefix=VENDOR_PREFIXES[i],prop=prefix?prefix+camelProp:property,prop in obj)return prop;i++}return undefined}function uniqueId(){return _uniqueId++}function getWindowForElement(element){var doc=element.ownerDocument;return doc.defaultView||doc.parentWindow}function Input(manager,callback){var self=this;this.manager=manager,this.callback=callback,this.element=manager.element,this.target=manager.options.inputTarget,this.domHandler=function(ev){boolOrFn(manager.options.enable,[manager])&&self.handler(ev)},this.init()}function createInputInstance(manager){var Type,inputClass=manager.options.inputClass;return new(Type=inputClass?inputClass:SUPPORT_POINTER_EVENTS?PointerEventInput:SUPPORT_ONLY_TOUCH?TouchInput:SUPPORT_TOUCH?TouchMouseInput:MouseInput)(manager,inputHandler)}function inputHandler(manager,eventType,input){var pointersLen=input.pointers.length,changedPointersLen=input.changedPointers.length,isFirst=eventType&INPUT_START&&pointersLen-changedPointersLen===0,isFinal=eventType&(INPUT_END|INPUT_CANCEL)&&pointersLen-changedPointersLen===0;input.isFirst=!!isFirst,input.isFinal=!!isFinal,isFirst&&(manager.session={}),input.eventType=eventType,computeInputData(manager,input),manager.emit("hammer.input",input),manager.recognize(input),manager.session.prevInput=input}function computeInputData(manager,input){var session=manager.session,pointers=input.pointers,pointersLength=pointers.length;session.firstInput||(session.firstInput=simpleCloneInputData(input)),pointersLength>1&&!session.firstMultiple?session.firstMultiple=simpleCloneInputData(input):1===pointersLength&&(session.firstMultiple=!1);var firstInput=session.firstInput,firstMultiple=session.firstMultiple,offsetCenter=firstMultiple?firstMultiple.center:firstInput.center,center=input.center=getCenter(pointers);input.timeStamp=now(),input.deltaTime=input.timeStamp-firstInput.timeStamp,input.angle=getAngle(offsetCenter,center),input.distance=getDistance(offsetCenter,center),computeDeltaXY(session,input),input.offsetDirection=getDirection(input.deltaX,input.deltaY),input.scale=firstMultiple?getScale(firstMultiple.pointers,pointers):1,input.rotation=firstMultiple?getRotation(firstMultiple.pointers,pointers):0,computeIntervalInputData(session,input);var target=manager.element;hasParent(input.srcEvent.target,target)&&(target=input.srcEvent.target),input.target=target}function computeDeltaXY(session,input){var center=input.center,offset=session.offsetDelta||{},prevDelta=session.prevDelta||{},prevInput=session.prevInput||{};(input.eventType===INPUT_START||prevInput.eventType===INPUT_END)&&(prevDelta=session.prevDelta={x:prevInput.deltaX||0,y:prevInput.deltaY||0},offset=session.offsetDelta={x:center.x,y:center.y}),input.deltaX=prevDelta.x+(center.x-offset.x),input.deltaY=prevDelta.y+(center.y-offset.y)}function computeIntervalInputData(session,input){var velocity,velocityX,velocityY,direction,last=session.lastInterval||input,deltaTime=input.timeStamp-last.timeStamp;if(input.eventType!=INPUT_CANCEL&&(deltaTime>COMPUTE_INTERVAL||last.velocity===undefined)){var deltaX=last.deltaX-input.deltaX,deltaY=last.deltaY-input.deltaY,v=getVelocity(deltaTime,deltaX,deltaY);velocityX=v.x,velocityY=v.y,velocity=abs(v.x)>abs(v.y)?v.x:v.y,direction=getDirection(deltaX,deltaY),session.lastInterval=input}else velocity=last.velocity,velocityX=last.velocityX,velocityY=last.velocityY,direction=last.direction;input.velocity=velocity,input.velocityX=velocityX,input.velocityY=velocityY,input.direction=direction}function simpleCloneInputData(input){for(var pointers=[],i=0;i<input.pointers.length;)pointers[i]={clientX:round(input.pointers[i].clientX),clientY:round(input.pointers[i].clientY)},i++;return{timeStamp:now(),pointers:pointers,center:getCenter(pointers),deltaX:input.deltaX,deltaY:input.deltaY}}function getCenter(pointers){var pointersLength=pointers.length;if(1===pointersLength)return{x:round(pointers[0].clientX),y:round(pointers[0].clientY)};for(var x=0,y=0,i=0;pointersLength>i;)x+=pointers[i].clientX,y+=pointers[i].clientY,i++;return{x:round(x/pointersLength),y:round(y/pointersLength)}}function getVelocity(deltaTime,x,y){return{x:x/deltaTime||0,y:y/deltaTime||0}}function getDirection(x,y){return x===y?DIRECTION_NONE:abs(x)>=abs(y)?x>0?DIRECTION_LEFT:DIRECTION_RIGHT:y>0?DIRECTION_UP:DIRECTION_DOWN}function getDistance(p1,p2,props){props||(props=PROPS_XY);var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.sqrt(x*x+y*y)}function getAngle(p1,p2,props){props||(props=PROPS_XY);var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return 180*Math.atan2(y,x)/Math.PI}function getRotation(start,end){return getAngle(end[1],end[0],PROPS_CLIENT_XY)-getAngle(start[1],start[0],PROPS_CLIENT_XY)}function getScale(start,end){return getDistance(end[0],end[1],PROPS_CLIENT_XY)/getDistance(start[0],start[1],PROPS_CLIENT_XY)}function MouseInput(){this.evEl=MOUSE_ELEMENT_EVENTS,this.evWin=MOUSE_WINDOW_EVENTS,this.allow=!0,this.pressed=!1,Input.apply(this,arguments)}function PointerEventInput(){this.evEl=POINTER_ELEMENT_EVENTS,this.evWin=POINTER_WINDOW_EVENTS,Input.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function SingleTouchInput(){this.evTarget=SINGLE_TOUCH_TARGET_EVENTS,this.evWin=SINGLE_TOUCH_WINDOW_EVENTS,this.started=!1,Input.apply(this,arguments)}function normalizeSingleTouches(ev,type){var all=toArray(ev.touches),changed=toArray(ev.changedTouches);return type&(INPUT_END|INPUT_CANCEL)&&(all=uniqueArray(all.concat(changed),"identifier",!0)),[all,changed]}function TouchInput(){this.evTarget=TOUCH_TARGET_EVENTS,this.targetIds={},Input.apply(this,arguments)}function getTouches(ev,type){var allTouches=toArray(ev.touches),targetIds=this.targetIds;if(type&(INPUT_START|INPUT_MOVE)&&1===allTouches.length)return targetIds[allTouches[0].identifier]=!0,[allTouches,allTouches];var i,targetTouches,changedTouches=toArray(ev.changedTouches),changedTargetTouches=[],target=this.target;if(targetTouches=allTouches.filter(function(touch){return hasParent(touch.target,target)}),type===INPUT_START)for(i=0;i<targetTouches.length;)targetIds[targetTouches[i].identifier]=!0,i++;for(i=0;i<changedTouches.length;)targetIds[changedTouches[i].identifier]&&changedTargetTouches.push(changedTouches[i]),type&(INPUT_END|INPUT_CANCEL)&&delete targetIds[changedTouches[i].identifier],i++;return changedTargetTouches.length?[uniqueArray(targetTouches.concat(changedTargetTouches),"identifier",!0),changedTargetTouches]:void 0}function TouchMouseInput(){Input.apply(this,arguments);var handler=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,handler),this.mouse=new MouseInput(this.manager,handler)}function TouchAction(manager,value){this.manager=manager,this.set(value)}function cleanTouchActions(actions){if(inStr(actions,TOUCH_ACTION_NONE))return TOUCH_ACTION_NONE;var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X),hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y);return hasPanX&&hasPanY?TOUCH_ACTION_PAN_X+" "+TOUCH_ACTION_PAN_Y:hasPanX||hasPanY?hasPanX?TOUCH_ACTION_PAN_X:TOUCH_ACTION_PAN_Y:inStr(actions,TOUCH_ACTION_MANIPULATION)?TOUCH_ACTION_MANIPULATION:TOUCH_ACTION_AUTO}function Recognizer(options){this.id=uniqueId(),this.manager=null,this.options=merge(options||{},this.defaults),this.options.enable=ifUndefined(this.options.enable,!0),this.state=STATE_POSSIBLE,this.simultaneous={},this.requireFail=[]}function stateStr(state){return state&STATE_CANCELLED?"cancel":state&STATE_ENDED?"end":state&STATE_CHANGED?"move":state&STATE_BEGAN?"start":""}function directionStr(direction){return direction==DIRECTION_DOWN?"down":direction==DIRECTION_UP?"up":direction==DIRECTION_LEFT?"left":direction==DIRECTION_RIGHT?"right":""}function getRecognizerByNameIfManager(otherRecognizer,recognizer){var manager=recognizer.manager;return manager?manager.get(otherRecognizer):otherRecognizer}function AttrRecognizer(){Recognizer.apply(this,arguments)}function PanRecognizer(){AttrRecognizer.apply(this,arguments),this.pX=null,this.pY=null}function PinchRecognizer(){AttrRecognizer.apply(this,arguments)}function PressRecognizer(){Recognizer.apply(this,arguments),this._timer=null,this._input=null}function RotateRecognizer(){AttrRecognizer.apply(this,arguments)}function SwipeRecognizer(){AttrRecognizer.apply(this,arguments)}function TapRecognizer(){Recognizer.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Hammer(element,options){return options=options||{},options.recognizers=ifUndefined(options.recognizers,Hammer.defaults.preset),new Manager(element,options)}function Manager(element,options){options=options||{},this.options=merge(options,Hammer.defaults),this.options.inputTarget=this.options.inputTarget||element,this.handlers={},this.session={},this.recognizers=[],this.element=element,this.input=createInputInstance(this),this.touchAction=new TouchAction(this,this.options.touchAction),toggleCssProps(this,!0),each(options.recognizers,function(item){var recognizer=this.add(new item[0](item[1]));item[2]&&recognizer.recognizeWith(item[2]),item[3]&&recognizer.requireFailure(item[3])},this)}function toggleCssProps(manager,add){var element=manager.element;each(manager.options.cssProps,function(value,name){element.style[prefixed(element.style,name)]=add?value:""})}function triggerDomEvent(event,data){var gestureEvent=document.createEvent("Event");gestureEvent.initEvent(event,!0,!0),gestureEvent.gesture=data,data.target.dispatchEvent(gestureEvent)}var VENDOR_PREFIXES=["","webkit","moz","MS","ms","o"],TEST_ELEMENT=document.createElement("div"),TYPE_FUNCTION="function",round=Math.round,abs=Math.abs,now=Date.now,_uniqueId=1,MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,SUPPORT_TOUCH="ontouchstart"in window,SUPPORT_POINTER_EVENTS=prefixed(window,"PointerEvent")!==undefined,SUPPORT_ONLY_TOUCH=SUPPORT_TOUCH&&MOBILE_REGEX.test(navigator.userAgent),INPUT_TYPE_TOUCH="touch",INPUT_TYPE_PEN="pen",INPUT_TYPE_MOUSE="mouse",INPUT_TYPE_KINECT="kinect",COMPUTE_INTERVAL=25,INPUT_START=1,INPUT_MOVE=2,INPUT_END=4,INPUT_CANCEL=8,DIRECTION_NONE=1,DIRECTION_LEFT=2,DIRECTION_RIGHT=4,DIRECTION_UP=8,DIRECTION_DOWN=16,DIRECTION_HORIZONTAL=DIRECTION_LEFT|DIRECTION_RIGHT,DIRECTION_VERTICAL=DIRECTION_UP|DIRECTION_DOWN,DIRECTION_ALL=DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,PROPS_XY=["x","y"],PROPS_CLIENT_XY=["clientX","clientY"];Input.prototype={handler:function(){},init:function(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)}};var MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END},MOUSE_ELEMENT_EVENTS="mousedown",MOUSE_WINDOW_EVENTS="mousemove mouseup";inherit(MouseInput,Input,{handler:function(ev){var eventType=MOUSE_INPUT_MAP[ev.type];eventType&INPUT_START&&0===ev.button&&(this.pressed=!0),eventType&INPUT_MOVE&&1!==ev.which&&(eventType=INPUT_END),this.pressed&&this.allow&&(eventType&INPUT_END&&(this.pressed=!1),this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:INPUT_TYPE_MOUSE,srcEvent:ev}))}});var POINTER_INPUT_MAP={pointerdown:INPUT_START,pointermove:INPUT_MOVE,pointerup:INPUT_END,pointercancel:INPUT_CANCEL,pointerout:INPUT_CANCEL},IE10_POINTER_TYPE_ENUM={2:INPUT_TYPE_TOUCH,3:INPUT_TYPE_PEN,4:INPUT_TYPE_MOUSE,5:INPUT_TYPE_KINECT},POINTER_ELEMENT_EVENTS="pointerdown",POINTER_WINDOW_EVENTS="pointermove pointerup pointercancel";window.MSPointerEvent&&(POINTER_ELEMENT_EVENTS="MSPointerDown",POINTER_WINDOW_EVENTS="MSPointerMove MSPointerUp MSPointerCancel"),inherit(PointerEventInput,Input,{handler:function(ev){var store=this.store,removePointer=!1,eventTypeNormalized=ev.type.toLowerCase().replace("ms",""),eventType=POINTER_INPUT_MAP[eventTypeNormalized],pointerType=IE10_POINTER_TYPE_ENUM[ev.pointerType]||ev.pointerType,isTouch=pointerType==INPUT_TYPE_TOUCH,storeIndex=inArray(store,ev.pointerId,"pointerId");eventType&INPUT_START&&(0===ev.button||isTouch)?0>storeIndex&&(store.push(ev),storeIndex=store.length-1):eventType&(INPUT_END|INPUT_CANCEL)&&(removePointer=!0),0>storeIndex||(store[storeIndex]=ev,this.callback(this.manager,eventType,{pointers:store,changedPointers:[ev],pointerType:pointerType,srcEvent:ev}),removePointer&&store.splice(storeIndex,1))}});var SINGLE_TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL},SINGLE_TOUCH_TARGET_EVENTS="touchstart",SINGLE_TOUCH_WINDOW_EVENTS="touchstart touchmove touchend touchcancel";inherit(SingleTouchInput,Input,{handler:function(ev){var type=SINGLE_TOUCH_INPUT_MAP[ev.type];if(type===INPUT_START&&(this.started=!0),this.started){var touches=normalizeSingleTouches.call(this,ev,type);type&(INPUT_END|INPUT_CANCEL)&&touches[0].length-touches[1].length===0&&(this.started=!1),this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev})}}});var TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL},TOUCH_TARGET_EVENTS="touchstart touchmove touchend touchcancel";inherit(TouchInput,Input,{handler:function(ev){var type=TOUCH_INPUT_MAP[ev.type],touches=getTouches.call(this,ev,type);touches&&this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev})}}),inherit(TouchMouseInput,Input,{handler:function(manager,inputEvent,inputData){var isTouch=inputData.pointerType==INPUT_TYPE_TOUCH,isMouse=inputData.pointerType==INPUT_TYPE_MOUSE;if(isTouch)this.mouse.allow=!1;else if(isMouse&&!this.mouse.allow)return;inputEvent&(INPUT_END|INPUT_CANCEL)&&(this.mouse.allow=!0),this.callback(manager,inputEvent,inputData)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var PREFIXED_TOUCH_ACTION=prefixed(TEST_ELEMENT.style,"touchAction"),NATIVE_TOUCH_ACTION=PREFIXED_TOUCH_ACTION!==undefined,TOUCH_ACTION_COMPUTE="compute",TOUCH_ACTION_AUTO="auto",TOUCH_ACTION_MANIPULATION="manipulation",TOUCH_ACTION_NONE="none",TOUCH_ACTION_PAN_X="pan-x",TOUCH_ACTION_PAN_Y="pan-y";TouchAction.prototype={set:function(value){value==TOUCH_ACTION_COMPUTE&&(value=this.compute()),NATIVE_TOUCH_ACTION&&(this.manager.element.style[PREFIXED_TOUCH_ACTION]=value),this.actions=value.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var actions=[];return each(this.manager.recognizers,function(recognizer){boolOrFn(recognizer.options.enable,[recognizer])&&(actions=actions.concat(recognizer.getTouchAction()))}),cleanTouchActions(actions.join(" "))},preventDefaults:function(input){if(!NATIVE_TOUCH_ACTION){var srcEvent=input.srcEvent,direction=input.offsetDirection;if(this.manager.session.prevented)return void srcEvent.preventDefault();var actions=this.actions,hasNone=inStr(actions,TOUCH_ACTION_NONE),hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y),hasPanX=inStr(actions,TOUCH_ACTION_PAN_X);return hasNone||hasPanY&&direction&DIRECTION_HORIZONTAL||hasPanX&&direction&DIRECTION_VERTICAL?this.preventSrc(srcEvent):void 0}},preventSrc:function(srcEvent){this.manager.session.prevented=!0,srcEvent.preventDefault()}};var STATE_POSSIBLE=1,STATE_BEGAN=2,STATE_CHANGED=4,STATE_ENDED=8,STATE_RECOGNIZED=STATE_ENDED,STATE_CANCELLED=16,STATE_FAILED=32;Recognizer.prototype={defaults:{},set:function(options){return extend(this.options,options),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"recognizeWith",this))return this;var simultaneous=this.simultaneous;return otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this),simultaneous[otherRecognizer.id]||(simultaneous[otherRecognizer.id]=otherRecognizer,otherRecognizer.recognizeWith(this)),this},dropRecognizeWith:function(otherRecognizer){return invokeArrayArg(otherRecognizer,"dropRecognizeWith",this)?this:(otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this),delete this.simultaneous[otherRecognizer.id],this)},requireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"requireFailure",this))return this;var requireFail=this.requireFail;return otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this),-1===inArray(requireFail,otherRecognizer)&&(requireFail.push(otherRecognizer),otherRecognizer.requireFailure(this)),this},dropRequireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"dropRequireFailure",this))return this;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);var index=inArray(this.requireFail,otherRecognizer);return index>-1&&this.requireFail.splice(index,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(otherRecognizer){return!!this.simultaneous[otherRecognizer.id]},emit:function(input){function emit(withState){self.manager.emit(self.options.event+(withState?stateStr(state):""),input)}var self=this,state=this.state;STATE_ENDED>state&&emit(!0),emit(),state>=STATE_ENDED&&emit(!0)},tryEmit:function(input){return this.canEmit()?this.emit(input):void(this.state=STATE_FAILED)},canEmit:function(){for(var i=0;i<this.requireFail.length;){if(!(this.requireFail[i].state&(STATE_FAILED|STATE_POSSIBLE)))return!1;i++}return!0},recognize:function(inputData){var inputDataClone=extend({},inputData);return boolOrFn(this.options.enable,[this,inputDataClone])?(this.state&(STATE_RECOGNIZED|STATE_CANCELLED|STATE_FAILED)&&(this.state=STATE_POSSIBLE),this.state=this.process(inputDataClone),void(this.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED|STATE_CANCELLED)&&this.tryEmit(inputDataClone))):(this.reset(),void(this.state=STATE_FAILED))},process:function(inputData){},getTouchAction:function(){},reset:function(){}},inherit(AttrRecognizer,Recognizer,{defaults:{pointers:1},attrTest:function(input){var optionPointers=this.options.pointers;return 0===optionPointers||input.pointers.length===optionPointers},process:function(input){var state=this.state,eventType=input.eventType,isRecognized=state&(STATE_BEGAN|STATE_CHANGED),isValid=this.attrTest(input);return isRecognized&&(eventType&INPUT_CANCEL||!isValid)?state|STATE_CANCELLED:isRecognized||isValid?eventType&INPUT_END?state|STATE_ENDED:state&STATE_BEGAN?state|STATE_CHANGED:STATE_BEGAN:STATE_FAILED}}),inherit(PanRecognizer,AttrRecognizer,{defaults:{event:"pan",threshold:10,pointers:1,direction:DIRECTION_ALL},getTouchAction:function(){var direction=this.options.direction,actions=[];
return direction&DIRECTION_HORIZONTAL&&actions.push(TOUCH_ACTION_PAN_Y),direction&DIRECTION_VERTICAL&&actions.push(TOUCH_ACTION_PAN_X),actions},directionTest:function(input){var options=this.options,hasMoved=!0,distance=input.distance,direction=input.direction,x=input.deltaX,y=input.deltaY;return direction&options.direction||(options.direction&DIRECTION_HORIZONTAL?(direction=0===x?DIRECTION_NONE:0>x?DIRECTION_LEFT:DIRECTION_RIGHT,hasMoved=x!=this.pX,distance=Math.abs(input.deltaX)):(direction=0===y?DIRECTION_NONE:0>y?DIRECTION_UP:DIRECTION_DOWN,hasMoved=y!=this.pY,distance=Math.abs(input.deltaY))),input.direction=direction,hasMoved&&distance>options.threshold&&direction&options.direction},attrTest:function(input){return AttrRecognizer.prototype.attrTest.call(this,input)&&(this.state&STATE_BEGAN||!(this.state&STATE_BEGAN)&&this.directionTest(input))},emit:function(input){this.pX=input.deltaX,this.pY=input.deltaY;var direction=directionStr(input.direction);direction&&this.manager.emit(this.options.event+direction,input),this._super.emit.call(this,input)}}),inherit(PinchRecognizer,AttrRecognizer,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE]},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.scale-1)>this.options.threshold||this.state&STATE_BEGAN)},emit:function(input){if(this._super.emit.call(this,input),1!==input.scale){var inOut=input.scale<1?"in":"out";this.manager.emit(this.options.event+inOut,input)}}}),inherit(PressRecognizer,Recognizer,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[TOUCH_ACTION_AUTO]},process:function(input){var options=this.options,validPointers=input.pointers.length===options.pointers,validMovement=input.distance<options.threshold,validTime=input.deltaTime>options.time;if(this._input=input,!validMovement||!validPointers||input.eventType&(INPUT_END|INPUT_CANCEL)&&!validTime)this.reset();else if(input.eventType&INPUT_START)this.reset(),this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED,this.tryEmit()},options.time,this);else if(input.eventType&INPUT_END)return STATE_RECOGNIZED;return STATE_FAILED},reset:function(){clearTimeout(this._timer)},emit:function(input){this.state===STATE_RECOGNIZED&&(input&&input.eventType&INPUT_END?this.manager.emit(this.options.event+"up",input):(this._input.timeStamp=now(),this.manager.emit(this.options.event,this._input)))}}),inherit(RotateRecognizer,AttrRecognizer,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE]},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.rotation)>this.options.threshold||this.state&STATE_BEGAN)}}),inherit(SwipeRecognizer,AttrRecognizer,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,pointers:1},getTouchAction:function(){return PanRecognizer.prototype.getTouchAction.call(this)},attrTest:function(input){var velocity,direction=this.options.direction;return direction&(DIRECTION_HORIZONTAL|DIRECTION_VERTICAL)?velocity=input.velocity:direction&DIRECTION_HORIZONTAL?velocity=input.velocityX:direction&DIRECTION_VERTICAL&&(velocity=input.velocityY),this._super.attrTest.call(this,input)&&direction&input.direction&&input.distance>this.options.threshold&&abs(velocity)>this.options.velocity&&input.eventType&INPUT_END},emit:function(input){var direction=directionStr(input.direction);direction&&this.manager.emit(this.options.event+direction,input),this.manager.emit(this.options.event,input)}}),inherit(TapRecognizer,Recognizer,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[TOUCH_ACTION_MANIPULATION]},process:function(input){var options=this.options,validPointers=input.pointers.length===options.pointers,validMovement=input.distance<options.threshold,validTouchTime=input.deltaTime<options.time;if(this.reset(),input.eventType&INPUT_START&&0===this.count)return this.failTimeout();if(validMovement&&validTouchTime&&validPointers){if(input.eventType!=INPUT_END)return this.failTimeout();var validInterval=this.pTime?input.timeStamp-this.pTime<options.interval:!0,validMultiTap=!this.pCenter||getDistance(this.pCenter,input.center)<options.posThreshold;this.pTime=input.timeStamp,this.pCenter=input.center,validMultiTap&&validInterval?this.count+=1:this.count=1,this._input=input;var tapCount=this.count%options.taps;if(0===tapCount)return this.hasRequireFailures()?(this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED,this.tryEmit()},options.interval,this),STATE_BEGAN):STATE_RECOGNIZED}return STATE_FAILED},failTimeout:function(){return this._timer=setTimeoutContext(function(){this.state=STATE_FAILED},this.options.interval,this),STATE_FAILED},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==STATE_RECOGNIZED&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Hammer.VERSION="2.0.4",Hammer.defaults={domEvents:!1,touchAction:TOUCH_ACTION_COMPUTE,enable:!0,inputTarget:null,inputClass:null,preset:[[RotateRecognizer,{enable:!1}],[PinchRecognizer,{enable:!1},["rotate"]],[SwipeRecognizer,{direction:DIRECTION_HORIZONTAL}],[PanRecognizer,{direction:DIRECTION_HORIZONTAL},["swipe"]],[TapRecognizer],[TapRecognizer,{event:"doubletap",taps:2},["tap"]],[PressRecognizer]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var STOP=1,FORCED_STOP=2;Manager.prototype={set:function(options){return extend(this.options,options),options.touchAction&&this.touchAction.update(),options.inputTarget&&(this.input.destroy(),this.input.target=options.inputTarget,this.input.init()),this},stop:function(force){this.session.stopped=force?FORCED_STOP:STOP},recognize:function(inputData){var session=this.session;if(!session.stopped){this.touchAction.preventDefaults(inputData);var recognizer,recognizers=this.recognizers,curRecognizer=session.curRecognizer;(!curRecognizer||curRecognizer&&curRecognizer.state&STATE_RECOGNIZED)&&(curRecognizer=session.curRecognizer=null);for(var i=0;i<recognizers.length;)recognizer=recognizers[i],session.stopped===FORCED_STOP||curRecognizer&&recognizer!=curRecognizer&&!recognizer.canRecognizeWith(curRecognizer)?recognizer.reset():recognizer.recognize(inputData),!curRecognizer&&recognizer.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED)&&(curRecognizer=session.curRecognizer=recognizer),i++}},get:function(recognizer){if(recognizer instanceof Recognizer)return recognizer;for(var recognizers=this.recognizers,i=0;i<recognizers.length;i++)if(recognizers[i].options.event==recognizer)return recognizers[i];return null},add:function(recognizer){if(invokeArrayArg(recognizer,"add",this))return this;var existing=this.get(recognizer.options.event);return existing&&this.remove(existing),this.recognizers.push(recognizer),recognizer.manager=this,this.touchAction.update(),recognizer},remove:function(recognizer){if(invokeArrayArg(recognizer,"remove",this))return this;var recognizers=this.recognizers;return recognizer=this.get(recognizer),recognizers.splice(inArray(recognizers,recognizer),1),this.touchAction.update(),this},on:function(events,handler){var handlers=this.handlers;return each(splitStr(events),function(event){handlers[event]=handlers[event]||[],handlers[event].push(handler)}),this},off:function(events,handler){var handlers=this.handlers;return each(splitStr(events),function(event){handler?handlers[event].splice(inArray(handlers[event],handler),1):delete handlers[event]}),this},emit:function(event,data){this.options.domEvents&&triggerDomEvent(event,data);var handlers=this.handlers[event]&&this.handlers[event].slice();if(handlers&&handlers.length){data.type=event,data.preventDefault=function(){data.srcEvent.preventDefault()};for(var i=0;i<handlers.length;)handlers[i](data),i++}},destroy:function(){this.element&&toggleCssProps(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},extend(Hammer,{INPUT_START:INPUT_START,INPUT_MOVE:INPUT_MOVE,INPUT_END:INPUT_END,INPUT_CANCEL:INPUT_CANCEL,STATE_POSSIBLE:STATE_POSSIBLE,STATE_BEGAN:STATE_BEGAN,STATE_CHANGED:STATE_CHANGED,STATE_ENDED:STATE_ENDED,STATE_RECOGNIZED:STATE_RECOGNIZED,STATE_CANCELLED:STATE_CANCELLED,STATE_FAILED:STATE_FAILED,DIRECTION_NONE:DIRECTION_NONE,DIRECTION_LEFT:DIRECTION_LEFT,DIRECTION_RIGHT:DIRECTION_RIGHT,DIRECTION_UP:DIRECTION_UP,DIRECTION_DOWN:DIRECTION_DOWN,DIRECTION_HORIZONTAL:DIRECTION_HORIZONTAL,DIRECTION_VERTICAL:DIRECTION_VERTICAL,DIRECTION_ALL:DIRECTION_ALL,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:merge,extend:extend,inherit:inherit,bindFn:bindFn,prefixed:prefixed}),typeof define==TYPE_FUNCTION&&define.amd?define(function(){return Hammer}):"undefined"!=typeof module&&module.exports?module.exports=Hammer:window[exportName]=Hammer}(window,document,"Hammer"),function($,Hammer){function hammerify(el,options){var $el=$(el);$el.data("hammer")||$el.data("hammer",new Hammer($el[0],options))}$.fn.hammer=function(options){return this.each(function(){hammerify(this,options)})},Hammer.Manager.prototype.emit=function(originalEmit){return function(type,data){originalEmit.call(this,type,data),$(this.element).trigger({type:type,gesture:data})}}(Hammer.Manager.prototype.emit)}($,Hammer);var PinchZoom=function(el,options){this.el=$(el),this.zoomFactor=1,this.lastScale=1,this.offset={x:0,y:0},this.options=$.extend({},this.defaults,options),this.setupMarkup(),this.bindEvents(),this.update(),this.enable()},sum=function(a,b){return a+b},isCloseTo=function(value,expected){return value>expected-.01&&expected+.01>value};PinchZoom.prototype={defaults:{tapZoomFactor:2,zoomOutFactor:1.3,animationDuration:300,animationInterval:5,maxZoom:5,minZoom:.5,lockDragAxis:!1,use2d:!1,zoomStartEventName:"pz_zoomstart",zoomEndEventName:"pz_zoomend",dragStartEventName:"pz_dragstart",dragEndEventName:"pz_dragend",doubleTapEventName:"pz_doubletap"},handleDragStart:function(event){this.el.trigger(this.options.dragStartEventName),this.stopAnimation(),this.lastDragPosition=!1,this.hasInteraction=!0,this.handleDrag(event)},handleDrag:function(event){if(this.zoomFactor>1){var touch=this.getTouches(event)[0];this.drag(touch,this.lastDragPosition),this.offset=this.sanitizeOffset(this.offset),this.lastDragPosition=touch}},handleDragEnd:function(){this.el.trigger(this.options.dragEndEventName),this.end()},handleZoomStart:function(event){this.el.trigger(this.options.zoomStartEventName),this.stopAnimation(),this.lastScale=1,this.nthZoom=0,this.lastZoomCenter=!1,this.hasInteraction=!0},handleZoom:function(event,newScale){var touchCenter=this.getTouchCenter(this.getTouches(event)),scale=newScale/this.lastScale;this.lastScale=newScale,this.nthZoom+=1,this.nthZoom>3&&(this.scale(scale,touchCenter),this.drag(touchCenter,this.lastZoomCenter)),this.lastZoomCenter=touchCenter},handleZoomEnd:function(){this.el.trigger(this.options.zoomEndEventName),this.end()},handleDoubleTap:function(event){var center=this.getTouches(event)[0],zoomFactor=this.zoomFactor>1?1:this.options.tapZoomFactor,startZoomFactor=this.zoomFactor,updateProgress=function(progress){this.scaleTo(startZoomFactor+progress*(zoomFactor-startZoomFactor),center)}.bind(this);this.hasInteraction||(startZoomFactor>zoomFactor&&(center=this.getCurrentZoomCenter()),this.animate(this.options.animationDuration,this.options.animationInterval,updateProgress,this.swing),this.el.trigger(this.options.doubleTapEventName))},sanitizeOffset:function(offset){var maxX=(this.zoomFactor-1)*this.getContainerX(),maxY=(this.zoomFactor-1)*this.getContainerY(),maxOffsetX=Math.max(maxX,0),maxOffsetY=Math.max(maxY,0),minOffsetX=Math.min(maxX,0),minOffsetY=Math.min(maxY,0);return{x:Math.min(Math.max(offset.x,minOffsetX),maxOffsetX),y:Math.min(Math.max(offset.y,minOffsetY),maxOffsetY)}},scaleTo:function(zoomFactor,center){this.scale(zoomFactor/this.zoomFactor,center)},scale:function(scale,center){scale=this.scaleZoomFactor(scale),this.addOffset({x:(scale-1)*(center.x+this.offset.x),y:(scale-1)*(center.y+this.offset.y)})},scaleZoomFactor:function(scale){var originalZoomFactor=this.zoomFactor;return this.zoomFactor*=scale,this.zoomFactor=Math.min(this.options.maxZoom,Math.max(this.zoomFactor,this.options.minZoom)),this.zoomFactor/originalZoomFactor},drag:function(center,lastCenter){lastCenter&&(this.options.lockDragAxis?Math.abs(center.x-lastCenter.x)>Math.abs(center.y-lastCenter.y)?this.addOffset({x:-(center.x-lastCenter.x),y:0}):this.addOffset({y:-(center.y-lastCenter.y),x:0}):this.addOffset({y:-(center.y-lastCenter.y),x:-(center.x-lastCenter.x)}))},getTouchCenter:function(touches){return this.getVectorAvg(touches)},getVectorAvg:function(vectors){return{x:vectors.map(function(v){return v.x}).reduce(sum)/vectors.length,y:vectors.map(function(v){return v.y}).reduce(sum)/vectors.length}},addOffset:function(offset){this.offset={x:this.offset.x+offset.x,y:this.offset.y+offset.y}},sanitize:function(){this.zoomFactor<this.options.zoomOutFactor?this.zoomOutAnimation():this.isInsaneOffset(this.offset)&&this.sanitizeOffsetAnimation()},isInsaneOffset:function(offset){var sanitizedOffset=this.sanitizeOffset(offset);return sanitizedOffset.x!==offset.x||sanitizedOffset.y!==offset.y},sanitizeOffsetAnimation:function(){var targetOffset=this.sanitizeOffset(this.offset),startOffset={x:this.offset.x,y:this.offset.y},updateProgress=function(progress){this.offset.x=startOffset.x+progress*(targetOffset.x-startOffset.x),this.offset.y=startOffset.y+progress*(targetOffset.y-startOffset.y),this.update()}.bind(this);this.animate(this.options.animationDuration,this.options.animationInterval,updateProgress,this.swing)},zoomOutAnimation:function(){var startZoomFactor=this.zoomFactor,zoomFactor=1,center=this.getCurrentZoomCenter(),updateProgress=function(progress){this.scaleTo(startZoomFactor+progress*(zoomFactor-startZoomFactor),center)}.bind(this);this.animate(this.options.animationDuration,this.options.animationInterval,updateProgress,this.swing)},updateAspectRatio:function(){this.setContainerY()},getInitialZoomFactor:function(){return this.container[0].offsetWidth/this.el[0].offsetWidth},getAspectRatio:function(){return this.el[0].offsetWidth/this.el[0].offsetHeight},getCurrentZoomCenter:function(){var length=this.container[0].offsetWidth*this.zoomFactor,offsetLeft=this.offset.x,offsetRight=length-offsetLeft-this.container[0].offsetWidth,widthOffsetRatio=offsetLeft/offsetRight,centerX=widthOffsetRatio*this.container[0].offsetWidth/(widthOffsetRatio+1),height=this.container[0].offsetHeight*this.zoomFactor,offsetTop=this.offset.y,offsetBottom=height-offsetTop-this.container[0].offsetHeight,heightOffsetRatio=offsetTop/offsetBottom,centerY=heightOffsetRatio*this.container[0].offsetHeight/(heightOffsetRatio+1);return 0===offsetRight&&(centerX=this.container[0].offsetWidth),0===offsetBottom&&(centerY=this.container[0].offsetHeight),{x:centerX,y:centerY}},canDrag:function(){return!isCloseTo(this.zoomFactor,1)},getTouches:function(event){var position=this.container.offset();return Array.prototype.slice.call(event.touches).map(function(touch){return{x:touch.pageX-position.left,y:touch.pageY-position.top}})},animate:function(duration,interval,framefn,timefn,callback){var startTime=(new Date).getTime(),renderFrame=function(){if(this.inAnimation){var frameTime=(new Date).getTime()-startTime,progress=frameTime/duration;frameTime>=duration?(framefn(1),callback&&callback(),this.update(),this.stopAnimation(),this.update()):(timefn&&(progress=timefn(progress)),framefn(progress),this.update(),setTimeout(renderFrame,interval))}}.bind(this);this.inAnimation=!0,renderFrame()},stopAnimation:function(){this.inAnimation=!1},swing:function(p){return-Math.cos(p*Math.PI)/2+.5},getContainerX:function(){return window.innerWidth},getContainerY:function(){return window.innerHeight},setContainerY:function(y){var t=window.innerHeight;return this.el.css({height:t}),this.container.height(t)},setupMarkup:function(){this.container=$('<div class="pinch-zoom-container"></div>'),this.el.before(this.container),this.container.append(this.el),this.container.css({overflow:"hidden",position:"relative"}),this.el.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%",position:"absolute"})},end:function(){this.hasInteraction=!1,this.sanitize(),this.update()},bindEvents:function(){detectGestures(this.container.get(0),this),$(window).on("resize",this.update.bind(this)),$(this.el).find("img").on("load",this.update.bind(this))},update:function(){this.updatePlaned||(this.updatePlaned=!0,setTimeout(function(){this.updatePlaned=!1,this.updateAspectRatio();var zoomFactor=this.getInitialZoomFactor()*this.zoomFactor,offsetX=-this.offset.x/zoomFactor,offsetY=-this.offset.y/zoomFactor,transform3d="scale3d("+zoomFactor+", "+zoomFactor+",1) translate3d("+offsetX+"px,"+offsetY+"px,0px)",transform2d="scale("+zoomFactor+", "+zoomFactor+") translate("+offsetX+"px,"+offsetY+"px)",removeClone=function(){this.clone&&(this.clone.remove(),delete this.clone)}.bind(this);!this.options.use2d||this.hasInteraction||this.inAnimation?(this.is3d=!0,removeClone(),this.el.css({"-webkit-transform":transform3d,"-o-transform":transform2d,"-ms-transform":transform2d,"-moz-transform":transform2d,transform:transform3d})):(this.is3d&&(this.clone=this.el.clone(),this.clone.css("pointer-events","none"),this.clone.appendTo(this.container),setTimeout(removeClone,200)),this.el.css({"-webkit-transform":transform2d,"-o-transform":transform2d,"-ms-transform":transform2d,"-moz-transform":transform2d,transform:transform2d}),this.is3d=!1)}.bind(this),0))},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1}};var detectGestures=function(el,target){var interaction=null,fingers=0,lastTouchStart=null,startTouches=null,setInteraction=function(newInteraction,event){if(interaction!==newInteraction){if(interaction&&!newInteraction)switch(interaction){case"zoom":target.handleZoomEnd(event);break;case"drag":target.handleDragEnd(event)}switch(newInteraction){case"zoom":target.handleZoomStart(event);break;case"drag":target.handleDragStart(event)}}interaction=newInteraction},updateInteraction=function(event){2===fingers?setInteraction("zoom"):1===fingers&&target.canDrag()?setInteraction("drag",event):setInteraction(null,event)},targetTouches=function(touches){return Array.prototype.slice.call(touches).map(function(touch){return{x:touch.pageX,y:touch.pageY}})},getDistance=function(a,b){var x,y;return x=a.x-b.x,y=a.y-b.y,Math.sqrt(x*x+y*y)},calculateScale=function(startTouches,endTouches){var startDistance=getDistance(startTouches[0],startTouches[1]),endDistance=getDistance(endTouches[0],endTouches[1]);return endDistance/startDistance},cancelEvent=function(event){event.stopPropagation(),event.preventDefault()},detectDoubleTap=function(event){var time=(new Date).getTime();if(fingers>1&&(lastTouchStart=null),300>time-lastTouchStart)switch(cancelEvent(event),target.handleDoubleTap(event),interaction){case"zoom":target.handleZoomEnd(event);break;case"drag":target.handleDragEnd(event)}1===fingers&&(lastTouchStart=time)},firstMove=!0;el.addEventListener("touchstart",function(event){target.enabled&&(firstMove=!0,fingers=event.touches.length,detectDoubleTap(event))}),el.addEventListener("touchmove",function(event){if(target.enabled){if(firstMove)updateInteraction(event),interaction&&cancelEvent(event),startTouches=targetTouches(event.touches);else{switch(interaction){case"zoom":target.handleZoom(event,calculateScale(startTouches,targetTouches(event.touches)));break;case"drag":target.handleDrag(event)}interaction&&(cancelEvent(event),target.update())}firstMove=!1}}),el.addEventListener("touchend",function(event){target.enabled&&(fingers=event.touches.length,updateInteraction(event))})},UI=UI||{};!function($,UI){UI.support={},UI.support.transition=function(){var transitionEnd=function(){var name,element=window.document.body||window.document.documentElement,transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(name in transEndEventNames)if(void 0!==element.style[name])return transEndEventNames[name]}();return transitionEnd&&{end:transitionEnd}}(),UI.support.animation=function(){var animationEnd=function(){var name,element=window.document.body||window.document.documentElement,animEndEventNames={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(name in animEndEventNames)if(void 0!==element.style[name])return animEndEventNames[name]}();return animationEnd&&{end:animationEnd}}(),UI.support.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)},UI.support.touch="ontouchstart"in window&&navigator.userAgent.toLowerCase().match(/mobile|tablet/)||window.DocumentTouch&&document instanceof window.DocumentTouch||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0||!1,UI.support.mutationobserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||null,UI.utils={},UI.utils.debounce=function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&func.apply(context,args)}},UI.utils.isInView=function(element,options){var $element=$(element),visible=!(!$element.width()&&!$element.height())&&"none"!==$element.css("display");if(!visible)return!1;var windowLeft=$win.scrollLeft(),windowTop=$win.scrollTop(),offset=$element.offset(),left=offset.left,top=offset.top;return options=$.extend({topOffset:0,leftOffset:0},options),top+$element.height()>=windowTop&&top-options.topOffset<=windowTop+$win.height()&&left+$element.width()>=windowLeft&&left-options.leftOffset<=windowLeft+$win.width()},UI.utils.generateGUID=function(namespace){var uid=namespace+"-"||"cc-";do uid+=Math.random().toString(36).substring(2,7);while(document.getElementById(uid));return uid},UI.utils.options=function(string){if($.isPlainObject(string))return string;var start=string?string.indexOf("{"):-1,options={};if(-1!=start)try{options=new Function("","var json = "+string.substr(start)+"; return JSON.parse(JSON.stringify(json));")()}catch(e){}return options},$.support.transition=UI.support.transition,$.debounce=UI.utils.debounce,$.fn.emulateTransitionEnd=function(duration){var called=!1,$el=this;$(this).one(UI.support.transition.end,function(){called=!0});var callback=function(){called||$($el).trigger(UI.support.transition.end),$el.transitionEndTimmer=void 0};return this.transitionEndTimmer=setTimeout(callback,duration),this},$.fn.redraw=function(){return $(this).each(function(){this.offsetHeight}),this},$.fn.transitionEnd=function(callback){function fireCallBack(e){callback.call(this,e),endEvent&&dom.off(endEvent,fireCallBack)}var endEvent=UI.support.transition.end,dom=this;return callback&&endEvent&&dom.on(endEvent,fireCallBack),this},UI.utils.rAF=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||function(callback){return window.setTimeout(callback,1e3/60)}}(),UI.utils.cancelAF=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||function(id){window.clearTimeout(id)}}(),UI.utils.measureScrollbar=function(){if(document.body.clientWidth>=window.innerWidth)return 0;var $measure=$('<div style="width: 100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;"></div>');$(document.body).append($measure);var scrollbarWidth=$measure[0].offsetWidth-$measure[0].clientWidth;return $measure.remove(),scrollbarWidth},UI.utils.imageLoader=function($image,callback){function loaded(){callback($image[0])}function bindLoad(){if(this.one("load",loaded),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var src=this.attr("src"),param=src.match(/\?/)?"&":"?";param+="random="+(new Date).getTime(),this.attr("src",src+param)}}return $image.attr("src")?void($image[0].complete||4===$image[0].readyState?loaded():bindLoad.call($image)):void loaded()},$.parseTpl=function(str,data){var tmpl="var __p=[];with(obj||{}){__p.push('"+str.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(match,code){return"',"+code.replace(/\\'/,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(match,code){return"');"+code.replace(/\\'/,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+'\');}return __p.join("");',func=new Function("obj",tmpl);return data?func(data):func},$.UI=UI}(jQuery,UI),function($){"use strict";function Panel($element,settings){return this.settings=$.extend({},Panel.DEFAULTS,settings||{}),this.$element=$element,this.active=null,this.events(),this}function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("panel"),options=$.extend({},Panel.DEFAULTS,"object"==typeof option&&option);data||$this.data("panel",data=new Panel($this,options)),"string"==typeof option?data[option]&&data[option]():data.toggle()})}var scrollPos,$win=$(window),$doc=$(document);Panel.DEFAULTS={duration:300,effect:"overlay",target:null,width:null},Panel.prototype={open:function(){var $element=this.$element;if($element.length&&!$element.hasClass("cc-active")){var effect=this.settings.effect,$html=$("html"),$body=$("body"),$bar=$element.find(".cc-panel-content").first();this.settings.width&&("number"==typeof this.settings.width?$bar.width(this.settings.width+"px"):$bar.width(this.settings.width));var dir=$bar.hasClass("cc-panel-flip")?-1:1;$bar.addClass("cc-panel-"+effect),scrollPos={x:window.scrollX,y:window.scrollY},$element.addClass("cc-active"),$body.css({width:window.innerWidth,height:$win.height()}).addClass("cc-panel-page"),"overlay"!==effect&&$body.css({"margin-left":$bar.outerWidth()*dir}).width(),$html.css("margin-top",-1*scrollPos.y),setTimeout(function(){$bar.addClass("cc-active").width()},0),$element.trigger("open.panel"),this.active=!0,$element.off("click.panel").on("click.panel",$.proxy(function(e){var $target=$(e.target);if(!e.type.match(/swipe/)){if($target.hasClass("cc-panel-content"))return;if($target.parents(".cc-panel-content").first().length)return}e.stopImmediatePropagation(),this.close()},this))}},close:function(force){function complete(){$body.removeClass("cc-panel-page").css({width:"",height:"","margin-left":"","margin-right":""}),$element.removeClass("cc-active"),$bar.removeClass("cc-active"),$html.css("margin-top",""),window.scrollTo(scrollPos.x,scrollPos.y),$element.trigger("closed.panel"),me.active=!1}var me=this,$html=$("html"),$body=$("body"),$element=this.$element,$bar=$element.find(".cc-panel-content").first();$element.length&&$element.hasClass("cc-active")&&($element.trigger("close.panel"),!force&&$.support.transition?(setTimeout(function(){$bar.removeClass("cc-active")},0),$body.css("margin-left","").one($.support.transition.end,function(){complete()}).emulateTransitionEnd(this.settings.duration)):complete(),$element.off("click.panel"),$html.off(".panel"))},events:function(){$doc.on("click.panel",'[data-panel="closeAll"]',$.proxy(function(e){e.preventDefault(),this.close()},this)),$doc.on("click.panel",'[data-panel="close"]',function(e){e.preventDefault();var _this=$(this),closestPanel=_this.closest(".cc-panel");closestPanel.length&&closestPanel.panel("close")})},toggle:function(){this.active?this.close():this.open()}},$.fn.panel=Plugin,$doc.on("click.panel",'[data-role="panel"]',function(e){e.preventDefault();var $this=$(this),options=UI.utils.options($this.data("options")),$target=$(options.target||this.href&&this.href.replace(/.*(?=#[^\s]+$)/,"")||$this.data("target"));if($target.length){var option=$target.data("panel")?"open":options;Plugin.call($target,option,this)}})}(jQuery),function($){"use strict";function Tabs(element,options){this.$element=$(element),this.options=$.extend({},Tabs.DEFAULTS,options||{}),this.$tabNav=this.$element.find(this.options.selector.nav),this.$navs=this.$tabNav.find("a"),this.$content=this.$element.find(this.options.selector.content),this.$tabPanels=this.$content.find(this.options.selector.panel),this.transitioning=!1,this.init()}Tabs.DEFAULTS={selector:{nav:".cc-tabs-nav",content:".cc-tabs-content",panel:".cc-tabs-panel"},className:{active:"cc-active"},swipe:!0},Tabs.prototype={init:function(){var me=this,options=this.options;if(1!==this.$tabNav.find("> .cc-active").length){var $tabNav=this.$tabNav;this.activate($tabNav.children("li").first(),$tabNav),this.activate(this.$tabPanels.first(),this.$content)}if(this.$navs.on("click.tabs.ui",function(e){e.preventDefault(),me.open($(this))}),options.swipe){var hammer=new Hammer(this.$content[0]);hammer.get("pan").set({direction:Hammer.DIRECTION_HORIZONTAL,threshold:100}),hammer.on("swipeleft",$.debounce(function(e){e.preventDefault();var $target=$(e.target);$target.is(options.selector.panel)||($target=$target.closest(options.selector.panel)),$target.focus();var $nav=me.getNextNav($target);$nav&&me.open($nav)},100)),hammer.on("swiperight",$.debounce(function(e){e.preventDefault();var $target=$(e.target);$target.is(options.selector.panel)||($target=$target.closest(options.selector.panel));var $nav=me.getPrevNav($target);$nav&&me.open($nav)},100))}},open:function($nav){if($nav&&!this.transitioning&&!$nav.parent("li").hasClass("cc-active")){var $tabNav=this.$tabNav,$navs=this.$navs,$tabContent=this.$content,href=$nav.attr("href"),regexHash=/^#.+$/,$target=regexHash.test(href)&&this.$content.find(href)||this.$tabPanels.eq($navs.index($nav)),previous=$tabNav.find(".cc-active a")[0],e=$.Event("open.tabs.ui",{relatedTarget:previous});$nav.trigger(e),e.isDefaultPrevented()||(this.activate($nav.closest("li"),$tabNav),this.activate($target,$tabContent,function(){$nav.trigger({type:"opened.tabs.ui",relatedTarget:previous})}))}},activate:function($element,$container,callback){this.transitioning=!0;var $active=$container.find("> .cc-active"),transition=callback&&$.support.transition&&!!$active.length;$active.removeClass("cc-active"),$element.addClass("cc-active"),transition?$active.one($.support.transition.end,function(){callback&&callback()}):callback&&callback(),this.transitioning=!1},getNextNav:function($panel){var navIndex=this.$tabPanels.index($panel),rightSpring="animation-right-spring";return navIndex+1>=this.$navs.length?(animation&&$panel.addClass(rightSpring).on(animation.end,function(){$panel.removeClass(rightSpring)}),null):this.$navs.eq(navIndex+1)},getPrevNav:function($panel){var navIndex=this.$tabPanels.index($panel),leftSpring="animation-left-spring";return 0===navIndex?(animation&&$panel.addClass(leftSpring).on(animation.end,function(){$panel.removeClass(leftSpring)}),null):this.$navs.eq(navIndex-1)}},$.fn.tabs=function(option){return this.each(function(){var $this=$(this),$tabs=$this.is(".cc-tabs")&&$this||$this.closest(".cc-tabs"),data=$tabs.data("ui.tabs"),options=$.extend({},$.isPlainObject(option)?option:{});data||$tabs.data("ui.tabs",data=new Tabs($tabs[0],options)),
"string"==typeof option&&$this.is(".cc-tabs-nav a")&&data[option]($this)})}}(jQuery),$(function(){$('[data-role="tabs"]').tabs()}),function($){"use strict";var spinningTimer,Spinning=function(el,options){return this.$el=el,this.options=$.extend({},Spinning.rules.defaults,Spinning.rules[options.rule]||{},options||{}),this.min=parseFloat(this.options.min)||0,this.max=parseFloat(this.options.max)||0,this.$el.on("focus.spinner",$.proxy(function(e){e.preventDefault(),$(document).trigger("mouseup.spinner"),this.oldValue=this.value()},this)).on("change.spinner",$.proxy(function(e){e.preventDefault(),this.value(this.$el.val())},this)).on("keydown.spinner",$.proxy(function(e){var dir={38:"up",40:"down"}[e.which];dir&&(e.preventDefault(),this.spin(dir))},this)),this.oldValue=this.value(),this.value(this.$el.val()),this};Spinning.rules={defaults:{min:0,max:null,step:1,precision:0},currency:{min:0,max:null,step:.01,precision:2},quantity:{min:1,max:999,step:1,precision:0},percent:{min:1,max:100,step:1,precision:0},month:{min:1,max:12,step:1,precision:0},day:{min:1,max:31,step:1,precision:0},hour:{min:0,max:23,step:1,precision:0},minute:{min:1,max:59,step:1,precision:0},second:{min:1,max:59,step:1,precision:0}},Spinning.prototype={spin:function(dir){if("disabled"!==this.$el.attr("disabled"))switch(this.oldValue=this.value(),dir){case"up":this.value(this.oldValue+Number(this.options.step,10));break;case"down":this.value(this.oldValue-Number(this.options.step,10))}},value:function(v){if(null===v||void 0===v)return this.numeric(this.$el.val());v=this.numeric(v);var valid=this.validate(v);0!==valid&&(v=-1===valid?this.min:this.max),this.$el.val(v.toFixed(this.options.precision)),this.oldValue!==this.value()&&(this.$el.trigger("changing.spinner",[this.value(),this.oldValue]),clearTimeout(spinningTimer),spinningTimer=setTimeout($.proxy(function(){this.$el.trigger("changed.spinner",[this.value(),this.oldValue])},this),Spinner.delay))},numeric:function(v){return v=this.options.precision>0?parseFloat(v,10):parseInt(v,10),v||this.options.min||0},validate:function(val){return null!==this.options.min&&val<this.min?-1:null!==this.options.max&&val>this.max?1:0}};var Spinner=function(el,options){this.$el=el,this.$spinning=$("[data-spin='spinner']",this.$el),0===this.$spinning.length&&(this.$spinning=$(":input[type='text']",this.$el)),this.spinning=new Spinning(this.$spinning,this.$spinning.data()),this.$el.on("tap.spinner click.spinner","[data-spin='up'],[data-spin='down']",$.proxy(this.spin,this)).on("mousedown.spinner","[data-spin='up'],[data-spin='down']",$.proxy(this.spin,this)),$(document).on("mouseup.spinner",$.proxy(function(){clearTimeout(this.spinTimeout),clearInterval(this.spinInterval)},this)),options=$.extend({},options),options.delay&&this.delay(options.delay),options.changed&&this.changed(options.changed),options.changing&&this.changing(options.changing)};Spinner.delay=0,Spinner.prototype={constructor:Spinner,spin:function(e){var dir=$(e.currentTarget).data("spin");switch(e.type){case"click":e.preventDefault();var target=$(e.target);if(target.is(":disabled")||target.hasClass("disabled"))return;this.spinning.spin(dir);break;case"mousedown":1===e.which&&(this.spinTimeout=setTimeout($.proxy(this.beginSpin,this,dir),300))}},delay:function(ms){var delay=parseInt(ms,10);delay>0&&(this.constructor.delay=delay+100)},value:function(){return this.spinning.value()},changed:function(fn){this.bindHandler("changed.spinner",fn)},changing:function(fn){this.bindHandler("changing.spinner",fn)},bindHandler:function(t,fn){$.isFunction(fn)?this.$spinning.on(t,fn):this.$spinning.off(t)},beginSpin:function(dir){this.spinInterval=setInterval($.proxy(this.spinning.spin,this.spinning,dir),100)}},$.fn.spinner=function(options,value){return this.each(function(){var self=$(this),data=self.data("spinner");data||self.data("spinner",data=new Spinner(self,$.extend({},self.data(),options))),("delay"===options||"changed"===options||"changing"===options)&&data[options](value),"spin"===options&&value&&data.spinning.spin(value)})},$(function(){$('[data-role="spinner"]').spinner()})}(jQuery),function($){"use strict";var $doc=$(document),supportTransition=$.support.transition,Mask=function(options){this.settings=$.extend({},Mask.DEFAULTS,options||{}),this.id="ID"+(new Date).getTime()+"RAND"+Math.ceil(1e5*Math.random()),this.$element=$(this.settings.tpl,{id:this.id}),this.inited=!1,this.scrollbarWidth=0,this.used=$([])};Mask.DEFAULTS={tpl:'<div class="cc-mask" data-role="mask"></div>',duration:300},Mask.prototype={init:function(){return this.inited||($(document.body).append(this.$element),this.settings.opacity&&this.$element.css("opacity",this.settings.opacity),this.inited=!0,$doc.trigger("init.mask")),this},open:function(relatedElement){this.inited||this.init();var $element=this.$element;return relatedElement&&(this.used=this.used.add($(relatedElement))),this.checkScrollbar().setScrollbar(),$element.show().trigger("open.mask"),setTimeout(function(){$element.addClass("cc-active")},0),this},close:function(relatedElement,force){function complete(){this.resetScrollbar(),$element.hide()}if(this.used=this.used.not($(relatedElement)),!force&&this.used.length)return this;var $element=this.$element;return $element.removeClass("cc-active").trigger("close.mask"),supportTransition?$element.one(supportTransition.end,$.proxy(complete,this)).emulateTransitionEnd(this.settings.duration):complete.call(this),this},checkScrollbar:function(){return this.scrollbarWidth=UI.utils.measureScrollbar(),this},setScrollbar:function(){var $body=$(document.body),bodyPaddingRight=parseInt($body.css("padding-right")||0,10);return this.scrollbarWidth&&$body.css("padding-right",bodyPaddingRight+this.scrollbarWidth),$body.addClass("cc-mask-active"),this},resetScrollbar:function(){return $(document.body).css("padding-right","").removeClass("cc-mask-active"),this}},$.mask=new Mask}(jQuery),function($){"use strict";var $doc=$(document),supportTransition=UI.support.transition,Modal=function(element,options){this.options=$.extend({},Modal.DEFAULTS,options||{}),this.$element=$(element),this.$element.attr("id")||this.$element.attr("id","ID"+(new Date).getTime()+"RAND"+Math.ceil(1e5*Math.random())),this.isPopup=this.$element.hasClass("cc-popup"),this.active=this.transitioning=null,this.events()};Modal.DEFAULTS={className:{active:"cc-modal-active",out:"cc-modal-out"},selector:{modal:".cc-modal",active:".cc-modal-active"},cancelable:!0,onConfirm:function(){},onCancel:function(){},duration:300,transitionEnd:supportTransition.end&&supportTransition.end+".modal"},Modal.prototype={toggle:function(relatedElement){return this.active?this.close():this.open(relatedElement)},open:function(relatedElement){var $element=this.$element,options=this.options,isPopup=this.isPopup;if(!this.active&&this.$element.length){this.transitioning&&(clearTimeout($element.transitionEndTimmer),$element.transitionEndTimmer=null,$element.trigger(options.transitionEnd).off(options.transitionEnd)),isPopup&&this.$element.show(),this.active=!0,$element.trigger($.Event("open.modal",{relatedElement:relatedElement})),$.mask.open($element),$element.show().redraw(),!isPopup&&$element.css({marginTop:-parseInt($element.height()/2,10)+"px"}),$element.removeClass(options.className.out).addClass(options.className.active),this.transitioning=1;var complete=function(){$element.trigger($.Event("opened.modal",{relatedElement:relatedElement})),this.transitioning=0};return supportTransition?void $element.one(options.transitionEnd,$.proxy(complete,this)).emulateTransitionEnd(options.duration):complete.call(this)}},close:function(relatedElement){if(this.active){var $element=this.$element,options=this.options,isPopup=this.isPopup;this.transitioning&&(clearTimeout($element.transitionEndTimmer),$element.transitionEndTimmer=null,$element.trigger(options.transitionEnd).off(options.transitionEnd),$.mask.close($element,!0)),this.$element.trigger($.Event("close.modal",{relatedElement:relatedElement})),this.transitioning=1;var complete=function(){$element.trigger("closed.modal"),isPopup&&$element.removeClass(options.className.out),$element.hide(),this.transitioning=0};if($element.removeClass(options.className.active).addClass(options.className.out),!supportTransition)return complete.call(this);$element.one(options.transitionEnd,$.proxy(complete,this)).emulateTransitionEnd(options.duration),$.mask.close($element,!1),this.active=!1}},events:function(){var that=this,$element=this.$element,$ipt=$element.find('[data-modal="input"]');this.options.cancelable&&$.mask.$element.on("click",function(e){that.close()}),$element.find('[data-modal="close"]').on("click.modal",function(e){e.preventDefault(),that.close()}),$element.find('[data-modal="cancel"]').on("click.modal",function(e){e.preventDefault(),that.options.onCancel.call(that,$ipt.val()),that.close()}),$element.find('[data-modal="confirm"]').on("click.modal",function(e){e.preventDefault(),that.options.onConfirm.call(that,$ipt.val()),that.close()})}},$.fn.modal=function(option,relatedElement){return this.each(function(){var $this=$(this),data=$this.data("modal"),options=$.extend({},Modal.DEFAULTS,"object"==typeof option&&option);data||$this.data("modal",data=new Modal(this,options)),"string"==typeof option?data[option](relatedElement):data.open(option&&option.relatedElement||void 0)})},$doc.on("click.modal",'[data-role="modal"]',function(){var $this=$(this),options=UI.utils.options($this.attr("data-options")),$target=$(options.target||this.href&&this.href.replace(/.*(?=#[^\s]+$)/,"")||$this.data("target")),option=$target.data("modal")?"toggle":options;$.fn.modal.call($target,option,this)});var alertTpl='<div id="alertModal" class="cc-modal hide"><div class="cc-modal-header"></div><div class="cc-modal-content"></div><div class="cc-modal-footer"><a href="#" class="cc-modal-btn" data-modal="confirm">确定</a></div></div>';$.alert=function(text,title,callbackOk){"function"==typeof title&&(callbackOk=arguments[1],title=void 0);var modal=$("#alertModal");return modal.length||($("body").append(alertTpl),modal=$("#alertModal")),modal.find(".cc-modal-header").html("undefined"==typeof title?"":title),modal.find(".cc-modal-content").html(text||""),modal.modal({cancelable:!1,onConfirm:function(){$.isFunction(callbackOk)&&callbackOk.call(this),modal.remove()}})};var confirmTpl='<div id="confirmModal" class="cc-modal hide"><div class="cc-modal-header"></div><div class="cc-modal-content"></div><div class="cc-modal-footer"><a href="#" class="cc-modal-btn" data-modal="cancel">取消</a><a href="#" class="cc-modal-btn" data-modal="confirm">确定</a></div></div>';$.confirm=function(text,title,callbackOk,callbackCancel){"function"==typeof title&&(callbackCancel=arguments[2],callbackOk=arguments[1],title=void 0);var modal=$("#confirmModal");return modal.length||($("body").append(confirmTpl),modal=$("#confirmModal")),modal.find(".cc-modal-header").html("undefined"==typeof title?"":title),modal.find(".cc-modal-content").html(text||""),modal.modal({cancelable:!1,onConfirm:function(){$.isFunction(callbackOk)&&callbackOk.call(this),modal.remove()},onCancel:function(){$.isFunction(callbackCancel)&&callbackCancel.call(this),modal.remove()}})};var promptTpl='<div id="promptModal" class="cc-modal hide"><div class="cc-modal-header"></div><div class="cc-modal-content"><p class="modal-prompt-text"></p><input type="text" class="cc-input" data-modal="input"></div><div class="cc-modal-footer"><a href="#" class="cc-modal-btn" data-modal="cancel">取消</a><a href="#" class="cc-modal-btn" data-modal="confirm">确定</a></div></div>';$.prompt=function(text,title,callbackOk,callbackCancel){"function"==typeof title&&(callbackCancel=arguments[2],callbackOk=arguments[1],title=void 0);var modal=$("#promptModal");return modal.length||($("body").append(promptTpl),modal=$("#promptModal")),modal.find(".cc-modal-header").html("undefined"==typeof title?"":title),modal.find(".cc-modal-content .modal-prompt-text").html(text||""),modal.modal({cancelable:!1,onConfirm:function(val){$.isFunction(callbackOk)&&callbackOk.call(this),modal.remove()},onCancel:function(val){$.isFunction(callbackCancel)&&callbackCancel.call(this),modal.remove()}})};var dialogTpl='<div id="dialogModal" class="cc-modal hide"><div class="cc-modal-header"><%=title%></div><div class="cc-modal-content"><%=content%></div><%if(buttons){%><div class="cc-modal-footer"><% for(var i=0; i<buttons.length; i++) { var item = buttons[i];%><a href="javascript:;" class="cc-modal-btn" data-index="<%=item.index%>" data-key="<%=item.key%>"><%=item.text%></a><%}%></div><%}%></div>';$.dialog=function(text,title,btns){var options={};"object"==typeof text&&(options=arguments[0]),"object"==typeof title&&(btns=arguments[1],title=void 0);var dafaults={title:title?title:"",content:"string"==typeof text?text:"",btns:btns?btns:{"取消":function(dialog){},"确定":function(dialog){}}},opts=$.extend(dafaults,options||{}),i=0,buttons=[];opts.btns&&$.each(opts.btns,function(key){buttons.push({index:++i,text:key,key:key})}),opts=$.extend(opts,{buttons:buttons});var dialogModal=$("#dialogModal");dialogModal.length||(dialogModal=$($.parseTpl(dialogTpl,opts)).appendTo("body")),dialogModal.modal(),dialogModal.on("click",".cc-modal-btn",function(e){e.preventDefault;var me=$(this),fn=opts.btns[me.attr("data-key")];fn&&fn(dialogModal)})}}(jQuery),function($){"use strict";var containers={},messages={},notify=function(options,callFn){return"string"==$.type(options)&&(options={message:options}),arguments[1]&&(options=$.extend(options,"string"==$.type(arguments[1])?{status:arguments[1]}:arguments[1])),void 0!=callFn&&$.isFunction(callFn)&&(options.onClose=callFn),new Message(options).show()},closeAll=function(group,instantly){if(group)for(var id in messages)group===messages[id].group&&messages[id].close(instantly);else for(var id in messages)messages[id].close(instantly)},Message=function(options){var $this=this;this.options=$.extend({},Message.defaults,options),this.options.id?this.uuid=this.options.id:this.uuid="ID"+(new Date).getTime()+"RAND"+Math.ceil(1e5*Math.random()),this.element=$(['<div class="cc-notify-message">','<a class="cc-close">×</a>','<div class="cc-notify-content">'+this.options.message+"</div>","</div>"].join("")).data("notifyMessage",this),this.options.status&&(this.element.addClass("cc-notify-message-"+this.options.status),this.currentstatus=this.options.status),this.options.showClose||this.element.find(".cc-close").hide(),this.group=this.options.group,messages[this.uuid]=this,containers[this.options.pos]||(containers[this.options.pos]=$('<div class="cc-notify cc-notify-'+this.options.pos+'"></div>').appendTo("body").on("click",".cc-notify-message",function(){$(this).data("notifyMessage").close()})),this.options.showMask&&(this.mask=$('<div class="cc-notify-mask"></div>').appendTo("body"),this.options.opacity&&this.mask.css("opacity",this.options.opacity),this.mask.on("click",function(){$this.close()}))};Message.defaults={id:null,message:"",status:"",timeout:3e3,showMask:!0,group:null,showClose:!1,pos:"center",onClose:function(){}},Message.prototype={uuid:!1,element:!1,timout:!1,currentstatus:"",group:!1,show:function(){if(!this.element.is(":visible")){var $this=this;containers[this.options.pos].show().prepend(this.element);var marginbottom=parseInt(this.element.css("margin-bottom"),10);return this.element.css({opacity:0,"margin-top":-1*this.element.outerHeight(),"margin-bottom":0}).animate({opacity:1,"margin-top":0,"margin-bottom":marginbottom},function(){if($this.options.timeout){var closefn=function(){$this.close()};$this.timeout=setTimeout(closefn,$this.options.timeout),$this.element.hover(function(){clearTimeout($this.timeout)},function(){$this.timeout=setTimeout(closefn,$this.options.timeout)})}}),this}},close:function(instantly){var $this=this,finalize=function(){$this.options.showMask&&$this.mask.remove(),$this.element.remove(),containers[$this.options.pos].children().length||containers[$this.options.pos].hide(),$this.options.onClose.apply($this,[]),delete messages[$this.uuid]};this.timeout&&clearTimeout(this.timeout),instantly?finalize():this.element.animate({opacity:0,"margin-top":-1*this.element.outerHeight(),"margin-bottom":0},function(){finalize()})},content:function(html){var container=this.element.find(".cc-notify-content");return html?(container.html(html),this):container.html()},status:function(status){return status?(this.element.removeClass("cc-notify-message-"+this.currentstatus).addClass("cc-notify-message-"+status),this.currentstatus=status,this):this.currentstatus}},$.notify=notify,$.notify.closeAll=closeAll}(jQuery),function(root,factory){"function"==typeof define&&define.amd?define(function(){return factory(root)}):"object"==typeof exports?module.exports=factory:root.echo=factory(root)}(this,function(root){"use strict";var offset,poll,delay,useDebounce,unload,echo={},callback=function(){},isHidden=function(element){return null===element.offsetParent},inView=function(element,view){if(isHidden(element))return!1;var box=element.getBoundingClientRect();return box.right>=view.l&&box.bottom>=view.t&&box.left<=view.r&&box.top<=view.b},debounceOrThrottle=function(){(useDebounce||!poll)&&(clearTimeout(poll),poll=setTimeout(function(){echo.render(),poll=null},delay))};return echo.init=function(opts){opts=opts||{};var offsetAll=opts.offset||0,offsetVertical=opts.offsetVertical||offsetAll,offsetHorizontal=opts.offsetHorizontal||offsetAll,optionToInt=function(opt,fallback){return parseInt(opt||fallback,10)};offset={t:optionToInt(opts.offsetTop,offsetVertical),b:optionToInt(opts.offsetBottom,offsetVertical),l:optionToInt(opts.offsetLeft,offsetHorizontal),r:optionToInt(opts.offsetRight,offsetHorizontal)},delay=optionToInt(opts.throttle,250),useDebounce=opts.debounce!==!1,unload=!!opts.unload,callback=opts.callback||callback,echo.render(),document.addEventListener?(root.addEventListener("scroll",debounceOrThrottle,!1),root.addEventListener("load",debounceOrThrottle,!1)):(root.attachEvent("onscroll",debounceOrThrottle),root.attachEvent("onload",debounceOrThrottle))},echo.render=function(){for(var src,elem,nodes=document.querySelectorAll("img[data-echo], [data-echo-background]"),length=nodes.length,view={l:0-offset.l,t:0-offset.t,b:(root.innerHeight||document.documentElement.clientHeight)+offset.b,r:(root.innerWidth||document.documentElement.clientWidth)+offset.r},i=0;length>i;i++)elem=nodes[i],inView(elem,view)?(unload&&elem.setAttribute("data-echo-placeholder",elem.src),null!==elem.getAttribute("data-echo-background")?elem.style.backgroundImage="url("+elem.getAttribute("data-echo-background")+")":elem.src=elem.getAttribute("data-echo"),unload||(elem.removeAttribute("data-echo"),elem.removeAttribute("data-echo-background")),callback(elem,"load")):unload&&(src=elem.getAttribute("data-echo-placeholder"))&&(null!==elem.getAttribute("data-echo-background")?elem.style.backgroundImage="url("+src+")":elem.src=src,elem.removeAttribute("data-echo-placeholder"),callback(elem,"unload"));length||echo.detach()},echo.detach=function(){document.removeEventListener?root.removeEventListener("scroll",debounceOrThrottle):root.detachEvent("onscroll",debounceOrThrottle),clearTimeout(poll)},echo.refresh=function(){echo.render(),document.addEventListener?(root.addEventListener("scroll",debounceOrThrottle,!1),root.addEventListener("load",debounceOrThrottle,!1)):(root.attachEvent("onscroll",debounceOrThrottle),root.attachEvent("onload",debounceOrThrottle))},echo}),function($){var rAF=UI.utils.rAF,cAF=UI.utils.cancelAF,smoothScrollInProgress=!1,SmoothScroll=function(element,options){function smooth(pos){return(pos/=.5)<1?.5*Math.pow(pos,5):.5*(Math.pow(pos-2,5)+2)}function abort(){$this.off("touchstart.smoothscroll",cancelScroll),smoothScrollInProgress=!1}function render(now){smoothScrollInProgress&&(start||(start=now),t=Math.min(1,Math.max((now-start)/speed,0)),y=Math.round(initialY+delta*smooth(t)),delta>0&&y>targetY&&(y=targetY),0>delta&&targetY>y&&(y=targetY),lastY!=y&&$this.scrollTop(y),lastY=y,y!==targetY?(cAF(scrollRAF),scrollRAF=rAF(render)):(cAF(scrollRAF),abort()))}options=options||{};var start,t,y,$this=$(element),targetY=parseInt(options.position)||SmoothScroll.DEFAULTS.position,initialY=$this.scrollTop(),lastY=initialY,delta=targetY-initialY,speed=options.speed||Math.min(750,Math.min(1500,Math.abs(initialY-targetY))),cancelScroll=function(){abort()};if(!smoothScrollInProgress&&0!==delta){$this.on("touchstart.smoothscroll",cancelScroll),smoothScrollInProgress=!0;var scrollRAF=rAF(render)}};SmoothScroll.DEFAULTS={position:0},$.fn.smoothScroll=function(option){return this.each(function(){new SmoothScroll(this,option)})},$(document).on("click.smoothScroll",'[data-role="gotop"]',function(e){e.preventDefault();var options=UI.utils.options($(this).data("SmoothScroll"));$(window).smoothScroll(options)})}(jQuery),(window.jQuery||window.Zepto)&&!function($){$.fn.Swipe=function(option){return this.each(function(){var $this=$(this),data=$this.data("Swipe");$.extend({},"object"==typeof option&&option);data||$this.data("Swipe",data=new Swipe($(this)[0],option)),"string"==typeof option&&data[option]&&data[option]()})}}(window.jQuery||window.Zepto),$(function(){$('[data-role="swipe"]').each(function(){var $swipe=$(this),auto=$swipe.data("auto"),showDots=$swipe.data("dots"),period=$swipe.data("period")||5e3,swipeItemLen=$swipe.find(".swipe-wrap li").length,showCounts=$swipe.data("counts"),counts=$swipe.find(".counts"),instance=$swipe.data("instance");if(instance||$swipe.data("instance",instance=Swipe($swipe.get(0),{callback:function(pos){counts.find(".current-index").html(pos+1),$swipe.find(".dot").eq(pos).addClass("active").siblings().removeClass("active")}})),auto&&setInterval(function(){instance.next()},period),swipeItemLen>1&&showDots){for(var html='<ol class="dots">',i=0;swipeItemLen>i;i++)html+='<li class="dot">'+i+"</li>";html+="</ol>",$swipe.append(html),$swipe.find(".dot").on("click",function(){instance.slide($(this).text()),$(this).addClass("active").siblings().removeClass("active")}).first().addClass("active")}counts.length<1&&showCounts&&(counts=$('<div class="counts"><span class="current-index"></span>/<span class="total-index"></span></div>').appendTo($swipe),counts.find(".current-index").html("1"),counts.find(".total-index").html(swipeItemLen))})}),function($){var keyBreaker=/[^\[\]]+/g,convertValue=function(value){return $.isNumeric(value)?parseFloat(value):"true"===value?!0:"false"===value?!1:""===value||null===value?void 0:value},nestData=function(elem,type,data,parts,value,seen,fullName){var name=parts.shift();if(fullName=fullName?fullName+"."+name:name,parts.length)data[name]||(data[name]={}),nestData(elem,type,data[name],parts,value,seen,fullName);else{if(fullName in seen&&"radio"!=type&&!$.isArray(data[name])?name in data?data[name]=[data[name]]:data[name]=[]:seen[fullName]=!0,("radio"==type||"checkbox"==type)&&!elem.is(":checked"))return;data[name]?data[name].push(value):data[name]=value}};return $.fn.extend({formParams:function(params){var convert;return!!params===params&&(convert=params,params=null),params?this.setParams(params):this.getParams(convert)},setParams:function(params){this.find("[name]").each(function(){var $this=$(this),value=params[$this.attr("name")];void 0!==value&&($this.is(":radio")?$this.val()==value&&$this.attr("checked",!0):$this.is(":checkbox")?(value=$.isArray(value)?value:[value],$.inArray($this.val(),value)>-1&&$this.attr("checked",!0)):$this.val(value))})},getParams:function(convert){var data={},seen={};return this.find("[name]:not(:disabled)").each(function(){var parts,$this=$(this),type=$this.attr("type"),name=$this.attr("name"),value=$this.val();"submit"!=type&&name&&(parts=name.match(keyBreaker),parts.length||(parts=[name]),convert&&(value=convertValue(value)),nestData($this,type,data,parts,value,seen))}),data}}),$}(jQuery),function(w){"use strict";var InputMask=function(element){if(!element)throw new Error("InputMask requires an element argument.");if(element.getAttribute){var groupRegMatch;this.element=element,this.groupLength=this.element.getAttribute("data-grouplength")||3,groupRegMatch=this._buildRegexArr(this.groupLength),this.spacer=this.element.getAttribute("data-spacer")||" ",this.placeholder=this.element.placeholder,this.groupRegNonUniform=groupRegMatch.length>1,this.groupReg=new RegExp(groupRegMatch.join(""),this.groupRegNonUniform?"":"g")}};InputMask.prototype._buildRegexArr=function(groupLengths){for(var split=(""+groupLengths).split(","),str=[],j=0,k=split.length;k>j;j++)str.push("([\\S]{"+(""===split[j]?"1,":split[j])+"})"+(j>0?"?":""));return str},InputMask.prototype.format=function(value){var match,val=value;if(this.groupRegNonUniform){if(match=val.match(this.groupReg)){match.shift();for(var j=0;j<match.length;j++)match[j]||(match.splice(j,1),j--)}val=(match||[val]).join(this.spacer)}else val=val.replace(this.groupReg,"$1 ")," "===val.substr(val.length-1)&&(val=val.substr(0,val.length-1));return val},InputMask.prototype.update=function(){var maxlength=this.element.getAttribute("maxlength"),val=this.format(this.element.value);maxlength&&(val=val.substr(0,maxlength)),this.element.value=val},InputMask.prototype.unformat=function(value){return value.replace(/\s/g,"")},InputMask.prototype.reset=function(){this.element.value=this.unformat(this.element.value)},w.InputMask=InputMask}(this),function($){"use strict";var componentName="inputmask",enhancedAttr="data-enhanced",initSelector="[data-"+componentName+"]:not(["+enhancedAttr+"])";$.fn[componentName]=function(){return this.each(function(){var polite=new InputMask(this);$(this).bind("keyup",function(){polite.reset(),polite.update()}).data(componentName,polite),polite.update()})},$(document).bind("enhance",function(e){var $sel=$(e.target).is(initSelector)?$(e.target):$(initSelector,e.target);$sel[componentName]().attr(enhancedAttr,"true")})}(jQuery),function(){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("ui.pureview"),options=$.extend({},UI.utils.options($this.data("options")),"object"==typeof option&&option);data||$this.data("ui.pureview",data=new PureView(this,options)),"string"==typeof option&&data[option]()})}var animation=UI.support.animation,transition=UI.support.transition,PureView=function(element,options){this.$element=$(element),this.$body=$(document.body),this.options=$.extend({},PureView.DEFAULTS,options),this.$pureview=$(this.options.tpl,{id:UI.utils.generateGUID("cc-pureview")}),this.$slides=null,this.transitioning=null,this.scrollbarWidth=0,this.init()};PureView.DEFAULTS={tpl:'<div class="cc-pureview cc-pureview-bar-active"><ul class="cc-pureview-slider"></ul><ul class="cc-pureview-direction"><li class="cc-pureview-prev"><a href=""></a></li><li class="cc-pureview-next"><a href=""></a></li></ul><ol class="cc-pureview-nav"></ol><div class="cc-pureview-bar cc-active"><span class="cc-pureview-title"></span><span class="cc-pureview-current"></span> / <span class="cc-pureview-total"></span></div><div class="cc-pureview-actions cc-active"><a href="javascript:;" class="cc-back" data-cc-close="pureview"></a></div></div>',className:{prevSlide:"cc-pureview-slide-prev",nextSlide:"cc-pureview-slide-next",onlyOne:"cc-pureview-only",active:"cc-active",barActive:"cc-pureview-bar-active",activeBody:"cc-pureview-active"},selector:{slider:".cc-pureview-slider",close:'[data-cc-close="pureview"]',total:".cc-pureview-total",current:".cc-pureview-current",title:".cc-pureview-title",actions:".cc-pureview-actions",bar:".cc-pureview-bar",pinchZoom:".cc-pinch-zoom",nav:".cc-pureview-nav"},shareBtn:!1,target:"img",weChatImagePreview:!0},PureView.prototype.init=function(){var me=this,options=this.options,$element=this.$element,$pureview=this.$pureview,$slider=$pureview.find(options.selector.slider),$nav=$pureview.find(options.selector.nav),$slides=$([]),$navItems=$([]),$images=$element.find(options.target),total=$images.length,imgUrls=[];total&&(1===total&&$pureview.addClass(options.className.onlyOne),$images.each(function(i,item){var src,title;"a"==options.target?(src=item.href,title=item.title||""):(src=$(item).data("rel")||item.src,title=$(item).attr("alt")||""),imgUrls.push(src),$slides=$slides.add($('<li><div class="cc-pinch-zoom"><img src="'+src+'" alt="'+title+'"/></div></li>')),$navItems=$navItems.add($("<li>"+(i+1)+"</li>"))}),$slider.append($slides),$nav.append($navItems),$("body").append($pureview),$pureview.find(options.selector.total).text(total),this.$title=$pureview.find(options.selector.title),this.$current=$pureview.find(options.selector.current),this.$bar=$pureview.find(options.selector.bar),this.$actions=$pureview.find(options.selector.actions),this.$navItems=$nav.find("li"),this.$slides=$slider.find("li"),options.shareBtn&&this.$actions.append('<a href="javascript:;" class="icon icon-share-square-o" data-cc-toggle="share"></a>'),$slider.find(options.selector.pinchZoom).each(function(){$(this).data("pinchzoom",new PinchZoom($(this),{})),$(this).on("pz_doubletap",function(e){})}),$images.on("click.pureview",function(e){e.preventDefault();var clicked=$images.index(this);options.weChatImagePreview&&window.WeixinJSBridge?window.WeixinJSBridge.invoke("imagePreview",{current:imgUrls[clicked],urls:imgUrls}):me.open(clicked)}),$pureview.find(".cc-pureview-direction a").on("click.direction.pureview",function(e){e.preventDefault();var $clicked=$(e.target).parent("li");$clicked.is(".cc-pureview-prev")?me.prevSlide():me.nextSlide()}),this.$navItems.on("click.nav.pureview",function(){var index=me.$navItems.index($(this));me.activate(me.$slides.eq(index))}),$pureview.find(options.selector.close).on("click.close.pureview",function(e){e.preventDefault(),me.close()}),$slider.hammer().on("click.pureview",function(e){e.preventDefault(),me.toggleToolBar()}).on("swipeleft.pureview",function(e){e.preventDefault(),me.nextSlide()}).on("swiperight.pureview",function(e){e.preventDefault(),me.prevSlide()}),$slider.data("hammer").get("swipe").set({direction:Hammer.DIRECTION_HORIZONTAL,velocity:.35}),$(document).on("keydown.pureview",$.proxy(function(e){var keyCode=e.keyCode;37==keyCode?this.prevSlide():39==keyCode?this.nextSlide():27==keyCode&&this.close()},this)))},PureView.prototype.activate=function($slide){var options=this.options,$slides=this.$slides,activeIndex=$slides.index($slide),alt=$slide.find("img").attr("alt")||"",active=options.className.active;UI.utils.imageLoader($slide.find("img"),function(image){$(image).addClass("cc-img-loaded")}),$slides.find("."+active).is($slide)||this.transitioning||(this.transitioning=1,this.$title.text(alt),this.$current.text(activeIndex+1),$slides.removeClass(),$slide.addClass(active),$slides.eq(activeIndex-1).addClass(options.className.prevSlide),$slides.eq(activeIndex+1).addClass(options.className.nextSlide),this.$navItems.removeClass().eq(activeIndex).addClass(options.className.active),transition?$slide.one(transition.end,$.proxy(function(){this.transitioning=0},this)).emulateTransitionEnd(300):this.transitioning=0)},PureView.prototype.nextSlide=function(){if(1!==this.$slides.length){var $slides=this.$slides,$active=$slides.filter(".cc-active"),activeIndex=$slides.index($active),rightSpring="cc-animation-right-spring";activeIndex+1>=$slides.length?animation&&$active.addClass(rightSpring).on(animation.end,function(){$active.removeClass(rightSpring)}):this.activate($slides.eq(activeIndex+1))}},PureView.prototype.prevSlide=function(){if(1!==this.$slides.length){var $slides=this.$slides,$active=$slides.filter(".cc-active"),activeIndex=this.$slides.index($active),leftSpring="cc-animation-left-spring";0===activeIndex?animation&&$active.addClass(leftSpring).on(animation.end,function(){$active.removeClass(leftSpring)}):this.activate($slides.eq(activeIndex-1))}},PureView.prototype.toggleToolBar=function(){this.$pureview.toggleClass(this.options.className.barActive)},PureView.prototype.open=function(index){var active=index||0;this.checkScrollbar(),this.setScrollbar(),
this.activate(this.$slides.eq(active)),this.$pureview.addClass(this.options.className.active),this.$body.addClass(this.options.className.activeBody)},PureView.prototype.close=function(){function resetBody(){this.$body.removeClass(options.className.activeBody),this.resetScrollbar()}var options=this.options;this.$pureview.removeClass(options.className.active),this.$slides.removeClass(),transition?this.$pureview.one(transition.end,$.proxy(resetBody,this)):resetBody.call(this)},PureView.prototype.checkScrollbar=function(){this.scrollbarWidth=UI.utils.measureScrollbar()},PureView.prototype.setScrollbar=function(){var bodyPaddingRight=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",bodyPaddingRight+this.scrollbarWidth)},PureView.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},$.fn.pureview=Plugin,$(function(){$('[data-role="pureview"]').pureview()})}(jQuery),function(window,doc){function prefixStyle(style){return""===vendor?style:(style=style.charAt(0).toUpperCase()+style.substr(1),vendor+style)}var m=Math,_bindArr=[],dummyStyle=doc.createElement("div").style,vendor=function(){for(var t,vendors="webkitT,MozT,msT,OT,t".split(","),i=0,l=vendors.length;l>i;i++)if(t=vendors[i]+"ransform",t in dummyStyle)return vendors[i].substr(0,vendors[i].length-1);return!1}(),cssVendor=vendor?"-"+vendor.toLowerCase()+"-":"",transform=prefixStyle("transform"),transitionProperty=prefixStyle("transitionProperty"),transitionDuration=prefixStyle("transitionDuration"),transformOrigin=prefixStyle("transformOrigin"),transitionTimingFunction=prefixStyle("transitionTimingFunction"),isAndroid=(prefixStyle("transitionDelay"),/android/gi.test(navigator.appVersion)),isTouchPad=/hp-tablet/gi.test(navigator.appVersion),has3d=prefixStyle("perspective")in dummyStyle,hasTouch="ontouchstart"in window&&!isTouchPad,hasTransform=!!vendor,hasTransitionEnd=prefixStyle("transition")in dummyStyle,RESIZE_EV="onorientationchange"in window?"orientationchange":"resize",START_EV=hasTouch?"touchstart":"mousedown",MOVE_EV=hasTouch?"touchmove":"mousemove",END_EV=hasTouch?"touchend":"mouseup",CANCEL_EV=hasTouch?"touchcancel":"mouseup",TRNEND_EV=function(){if(vendor===!1)return!1;var transitionEnd={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return transitionEnd[vendor]}(),nextFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return setTimeout(callback,1)}}(),cancelFrame=function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),translateZ=has3d?" translateZ(0)":"",iScroll=function(el,options){var i,that=this;that.wrapper="object"==typeof el?el:doc.getElementById(el),that.wrapper.style.overflow="hidden",that.scroller=that.wrapper.children[0],that.translateZ=translateZ,that.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(i in options)that.options[i]=options[i];that.x=that.options.x,that.y=that.options.y,that.options.useTransform=hasTransform&&that.options.useTransform,that.options.useTransition=hasTransitionEnd&&that.options.useTransition,that.scroller.style[transitionProperty]=that.options.useTransform?cssVendor+"transform":"top left",that.scroller.style[transitionDuration]="0",that.scroller.style[transformOrigin]="0 0",that.options.useTransition&&(that.scroller.style[transitionTimingFunction]="cubic-bezier(0.33,0.66,0.66,1)"),that.options.useTransform?that.scroller.style[transform]="translate("+that.x+"px,"+that.y+"px)"+translateZ:that.scroller.style.cssText+=";position:absolute;top:"+that.y+"px;left:"+that.x+"px",that.refresh(),that._bind(RESIZE_EV,window),that._bind(START_EV),that.options.checkDOMChanges&&(that.checkDOMTime=setInterval(function(){that._checkDOMChanges()},500))};iScroll.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,isStopScrollAction:!1,handleEvent:function(e){var that=this;switch(e.type){case START_EV:if(!hasTouch&&0!==e.button)return;that._start(e);break;case MOVE_EV:that._move(e);break;case END_EV:case CANCEL_EV:that._end(e);break;case RESIZE_EV:that._resize();break;case TRNEND_EV:that._transitionEnd(e)}},_checkDOMChanges:function(){this.moved||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_resize:function(){var that=this;setTimeout(function(){that.refresh()},isAndroid?200:0)},_pos:function(x,y){x=this.hScroll?x:0,y=this.vScroll?y:0,this.options.useTransform?this.scroller.style[transform]="translate("+x+"px,"+y+"px) scale("+this.scale+")"+translateZ:(x=m.round(x),y=m.round(y),this.scroller.style.left=x+"px",this.scroller.style.top=y+"px"),this.x=x,this.y=y},_start:function(e){var matrix,x,y,that=this,point=hasTouch?e.touches[0]:e;that.enabled&&(that.options.onBeforeScrollStart&&that.options.onBeforeScrollStart.call(that,e),that.options.useTransition&&that._transitionTime(0),that.moved=!1,that.animating=!1,that.distX=0,that.distY=0,that.absDistX=0,that.absDistY=0,that.dirX=0,that.dirY=0,that.isStopScrollAction=!1,that.options.momentum&&(that.options.useTransform?(matrix=getComputedStyle(that.scroller,null)[transform].replace(/[^0-9\-.,]/g,"").split(","),x=+matrix[4],y=+matrix[5]):(x=+getComputedStyle(that.scroller,null).left.replace(/[^0-9-]/g,""),y=+getComputedStyle(that.scroller,null).top.replace(/[^0-9-]/g,"")),(m.round(x)!=m.round(that.x)||m.round(y)!=m.round(that.y))&&(that.isStopScrollAction=!0,that.options.useTransition?that._unbind(TRNEND_EV):cancelFrame(that.aniTime),that.steps=[],that._pos(x,y),that.options.onScrollEnd&&that.options.onScrollEnd.call(that))),that.startX=that.x,that.startY=that.y,that.pointX=point.pageX,that.pointY=point.pageY,that.startTime=e.timeStamp||Date.now(),that.options.onScrollStart&&that.options.onScrollStart.call(that,e),that._bind(MOVE_EV,window),that._bind(END_EV,window),that._bind(CANCEL_EV,window))},_move:function(e){var that=this,point=hasTouch?e.touches[0]:e,deltaX=point.pageX-that.pointX,deltaY=point.pageY-that.pointY,newX=that.x+deltaX,newY=that.y+deltaY,timestamp=e.timeStamp||Date.now();that.options.onBeforeScrollMove&&that.options.onBeforeScrollMove.call(that,e),that.pointX=point.pageX,that.pointY=point.pageY,(newX>0||newX<that.maxScrollX)&&(newX=that.options.bounce?that.x+deltaX/2:newX>=0||that.maxScrollX>=0?0:that.maxScrollX),(newY>that.minScrollY||newY<that.maxScrollY)&&(newY=that.options.bounce?that.y+deltaY/2:newY>=that.minScrollY||that.maxScrollY>=0?that.minScrollY:that.maxScrollY),that.distX+=deltaX,that.distY+=deltaY,that.absDistX=m.abs(that.distX),that.absDistY=m.abs(that.distY),that.absDistX<6&&that.absDistY<6||(that.options.lockDirection&&(that.absDistX>that.absDistY+5?(newY=that.y,deltaY=0):that.absDistY>that.absDistX+5&&(newX=that.x,deltaX=0)),that.moved=!0,that._beforePos?that._beforePos(newY,deltaY)&&that._pos(newX,newY):that._pos(newX,newY),that.dirX=deltaX>0?-1:0>deltaX?1:0,that.dirY=deltaY>0?-1:0>deltaY?1:0,timestamp-that.startTime>300&&(that.startTime=timestamp,that.startX=that.x,that.startY=that.y),that.options.onScrollMove&&that.options.onScrollMove.call(that,e))},_end:function(e){if(!hasTouch||0===e.touches.length){var target,ev,newDuration,that=this,point=hasTouch?e.changedTouches[0]:e,momentumX={dist:0,time:0},momentumY={dist:0,time:0},duration=(e.timeStamp||Date.now())-that.startTime,newPosX=that.x,newPosY=that.y;if(that._unbind(MOVE_EV,window),that._unbind(END_EV,window),that._unbind(CANCEL_EV,window),that.options.onBeforeScrollEnd&&that.options.onBeforeScrollEnd.call(that,e),!that.moved)return hasTouch&&this.options.handleClick&&!that.isStopScrollAction&&(that.doubleTapTimer=setTimeout(function(){for(that.doubleTapTimer=null,target=point.target;1!=target.nodeType;)target=target.parentNode;"SELECT"!=target.tagName&&"INPUT"!=target.tagName&&"TEXTAREA"!=target.tagName&&(ev=doc.createEvent("MouseEvents"),ev.initMouseEvent("click",!0,!0,e.view,1,point.screenX,point.screenY,point.clientX,point.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),ev._fake=!0,target.dispatchEvent(ev))},0)),that._resetPos(400),void(that.options.onTouchEnd&&that.options.onTouchEnd.call(that,e));if(300>duration&&that.options.momentum&&(momentumX=newPosX?that._momentum(newPosX-that.startX,duration,-that.x,that.scrollerW-that.wrapperW+that.x,that.options.bounce?that.wrapperW:0):momentumX,momentumY=newPosY?that._momentum(newPosY-that.startY,duration,-that.y,that.maxScrollY<0?that.scrollerH-that.wrapperH+that.y-that.minScrollY:0,that.options.bounce?that.wrapperH:0):momentumY,newPosX=that.x+momentumX.dist,newPosY=that.y+momentumY.dist,(that.x>0&&newPosX>0||that.x<that.maxScrollX&&newPosX<that.maxScrollX)&&(momentumX={dist:0,time:0}),(that.y>that.minScrollY&&newPosY>that.minScrollY||that.y<that.maxScrollY&&newPosY<that.maxScrollY)&&(momentumY={dist:0,time:0})),momentumX.dist||momentumY.dist)return newDuration=m.max(m.max(momentumX.time,momentumY.time),10),that.scrollTo(m.round(newPosX),m.round(newPosY),newDuration),void(that.options.onTouchEnd&&that.options.onTouchEnd.call(that,e));that._resetPos(200),that.options.onTouchEnd&&that.options.onTouchEnd.call(that,e)}},_resetPos:function(time){var that=this,resetX=that.x>=0?0:that.x<that.maxScrollX?that.maxScrollX:that.x,resetY=that.y>=that.minScrollY||that.maxScrollY>0?that.minScrollY:that.y<that.maxScrollY?that.maxScrollY:that.y;return resetX==that.x&&resetY==that.y?void(that.moved&&(that.moved=!1,that.options.onScrollEnd&&that.options.onScrollEnd.call(that),that._afterPos&&that._afterPos())):void that.scrollTo(resetX,resetY,time||0)},_transitionEnd:function(e){var that=this;e.target==that.scroller&&(that._unbind(TRNEND_EV),that._startAni())},_startAni:function(){var step,easeOut,animate,that=this,startX=that.x,startY=that.y,startTime=Date.now();if(!that.animating){if(!that.steps.length)return void that._resetPos(400);if(step=that.steps.shift(),step.x==startX&&step.y==startY&&(step.time=0),that.animating=!0,that.moved=!0,that.options.useTransition)return that._transitionTime(step.time),that._pos(step.x,step.y),that.animating=!1,void(step.time?that._bind(TRNEND_EV):that._resetPos(0));animate=function(){var newX,newY,now=Date.now();return now>=startTime+step.time?(that._pos(step.x,step.y),that.animating=!1,that.options.onAnimationEnd&&that.options.onAnimationEnd.call(that),void that._startAni()):(now=(now-startTime)/step.time-1,easeOut=m.sqrt(1-now*now),newX=(step.x-startX)*easeOut+startX,newY=(step.y-startY)*easeOut+startY,that._pos(newX,newY),void(that.animating&&(that.aniTime=nextFrame(animate))))},animate()}},_transitionTime:function(time){time+="ms",this.scroller.style[transitionDuration]=time},_momentum:function(dist,time,maxDistUpper,maxDistLower,size){var deceleration=6e-4,speed=m.abs(dist)*(this.options.speedScale||1)/time,newDist=speed*speed/(2*deceleration),newTime=0,outsideDist=0;return dist>0&&newDist>maxDistUpper?(outsideDist=size/(6/(newDist/speed*deceleration)),maxDistUpper+=outsideDist,speed=speed*maxDistUpper/newDist,newDist=maxDistUpper):0>dist&&newDist>maxDistLower&&(outsideDist=size/(6/(newDist/speed*deceleration)),maxDistLower+=outsideDist,speed=speed*maxDistLower/newDist,newDist=maxDistLower),newDist*=0>dist?-1:1,newTime=speed/deceleration,{dist:newDist,time:m.round(newTime)}},_offset:function(el){for(var left=-el.offsetLeft,top=-el.offsetTop;el=el.offsetParent;)left-=el.offsetLeft,top-=el.offsetTop;return el!=this.wrapper&&(left*=this.scale,top*=this.scale),{left:left,top:top}},_bind:function(type,el,bubble){_bindArr.concat([el||this.scroller,type,this]),(el||this.scroller).addEventListener(type,this,!!bubble)},_unbind:function(type,el,bubble){(el||this.scroller).removeEventListener(type,this,!!bubble)},destroy:function(){var that=this;that.scroller.style[transform]="",that._unbind(RESIZE_EV,window),that._unbind(START_EV),that._unbind(MOVE_EV,window),that._unbind(END_EV,window),that._unbind(CANCEL_EV,window),that.options.useTransition&&that._unbind(TRNEND_EV),that.options.checkDOMChanges&&clearInterval(that.checkDOMTime),that.options.onDestroy&&that.options.onDestroy.call(that);for(var i=0,l=_bindArr.length;l>i;)_bindArr[i].removeEventListener(_bindArr[i+1],_bindArr[i+2]),_bindArr[i]=null,i+=3;_bindArr=[]},refresh:function(){var offset,that=this;that.wrapperW=that.wrapper.clientWidth||1,that.wrapperH=that.wrapper.clientHeight||1,that.minScrollY=-that.options.topOffset||0,that.scrollerW=m.round(that.scroller.offsetWidth*that.scale),that.scrollerH=m.round((that.scroller.offsetHeight+that.minScrollY)*that.scale),that.maxScrollX=that.wrapperW-that.scrollerW,that.maxScrollY=that.wrapperH-that.scrollerH+that.minScrollY,that.dirX=0,that.dirY=0,that.options.onRefresh&&that.options.onRefresh.call(that),that.hScroll=that.options.hScroll&&that.maxScrollX<0,that.vScroll=that.options.vScroll&&(!that.options.bounceLock&&!that.hScroll||that.scrollerH>that.wrapperH),offset=that._offset(that.wrapper),that.wrapperOffsetLeft=-offset.left,that.wrapperOffsetTop=-offset.top,that.scroller.style[transitionDuration]="0",that._resetPos(400)},scrollTo:function(x,y,time,relative){var i,l,that=this,step=x;for(that.stop(),step.length||(step=[{x:x,y:y,time:time,relative:relative}]),i=0,l=step.length;l>i;i++)step[i].relative&&(step[i].x=that.x-step[i].x,step[i].y=that.y-step[i].y),that.steps.push({x:step[i].x,y:step[i].y,time:step[i].time||0});that._startAni()},scrollToElement:function(el,time){var pos,that=this;el=el.nodeType?el:that.scroller.querySelector(el),el&&(pos=that._offset(el),pos.left+=that.wrapperOffsetLeft,pos.top+=that.wrapperOffsetTop,pos.left=pos.left>0?0:pos.left<that.maxScrollX?that.maxScrollX:pos.left,pos.top=pos.top>that.minScrollY?that.minScrollY:pos.top<that.maxScrollY?that.maxScrollY:pos.top,time=void 0===time?m.max(2*m.abs(pos.left),2*m.abs(pos.top)):time,that.scrollTo(pos.left,pos.top,time))},scrollToPage:function(pageX,pageY,time){var x,y,that=this;time=void 0===time?400:time,that.options.onScrollStart&&that.options.onScrollStart.call(that),x=-that.wrapperW*pageX,y=-that.wrapperH*pageY,x<that.maxScrollX&&(x=that.maxScrollX),y<that.maxScrollY&&(y=that.maxScrollY),that.scrollTo(x,y,time)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(MOVE_EV,window),this._unbind(END_EV,window),this._unbind(CANCEL_EV,window)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(TRNEND_EV):cancelFrame(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},isReady:function(){return!this.moved&&!this.animating}},dummyStyle=null,"undefined"!=typeof exports?exports.iScroll=iScroll:window.iScroll=iScroll,function($,ns,undefined){if($){var iScroll,_iScroll=ns.iScroll,slice=[].slice,record=function(){var data={},id=0,ikey="_sid";return function(obj,val){var key=obj[ikey]||(obj[ikey]=++id);return val!==undefined&&(data[key]=val),null===val&&delete data[key],data[key]}}();ns.iScroll=iScroll=function(el,options){var ins=([].slice.call(arguments,0),new _iScroll(el,options));return record(el,ins),ins},iScroll.prototype=_iScroll.prototype,$.fn.iScroll=function(opts){var ret,obj,args=slice.call(arguments,1),method="string"==typeof opts&&opts;return $.each(this,function(i,el){if(obj=record(el)||iScroll(el,$.isPlainObject(opts)?opts:undefined),"this"===method)return ret=obj,!1;if(method){if(!$.isFunction(obj[method]))throw new Error("iScroll没有此方法："+method);if(ret=obj[method].apply(obj,args),ret!==undefined&&ret!==obj)return!1;ret=undefined}}),ret!==undefined?ret:this}}}(window.jQuery||null,window)}(window,document),$(function(){$('[data-role="hscroller"]').iScroll({hScroll:!0,vScroll:!1,hScrollbar:!1,vScrollbar:!1})}),function($){var monthNames=["01月","02月","03月","04月","05月","06月","07月","08月","09月","10月","11月","12月"],dayNames=["日","一","二","三","四","五","六"],getDaysInMonth=function(year,month){return 32-new Date(year,month,32).getDate()},getFirstDayOfMonth=function(year,month){return new Date(year,month,1).getDay()},formatNumber=function(val,len){for(var num=""+val;num.length<len;)num="0"+num;return num},parseDate=function(obj){var dateRE=/^(\d{4})(?:\-|\/)(\d{1,2})(?:\-|\/)(\d{1,2})$/;return"[object Date]"===Object.prototype.toString.call(obj)?obj:dateRE.test(obj)?new Date(parseInt(RegExp.$1,10),parseInt(RegExp.$2,10)-1,parseInt(RegExp.$3,10)):null},formatDate=function(date){return date.getFullYear()+"-"+formatNumber(date.getMonth()+1,2)+"-"+formatNumber(date.getDate(),2)},Calendar=function(element,options){this.$el=$(element),this._options=$.extend({},Calendar.DEFAULTS,options),this.minDate=this._options.minDate,this.maxDate=this._options.maxDate,this.date=this._options.date||new Date,this.iscroll=null,this.lastDate=new Date,this.pageIndex=4,this.loading=!1,this.init()};Calendar.DEFAULTS={date:null,firstDay:0,minDate:null,maxDate:null,canSwipe:!0,perPage:5,totalPage:12,datePrice:null,loadData:function(dateStr){}},Calendar.prototype={init:function(){var el=this.$el,opts=this._options;this.renderHtml(new Date,opts.perPage),el.find(".cc-calendar-content").height($(window).height()-40-$(".cc-header").height()),this.bindEvents(),this.refresh()},bindEvents:function(){var cell,date,el=this.$el,_this=this,opts=this._options;$(document).on("click",".cc-calendar-calendar tbody a",function(e){var me=$(this),ev=$.Event("select.calendar",{relatedTarget:this});e.preventDefault(),cell=me.parent(),date=cell.attr("data-year")+formatNumber(cell.attr("data-month"),2)+formatNumber(me.attr("data-date"),2);var id=me.find("input").val();el.trigger(ev,[date,id]),el.find(".cc-calendar-current-day").removeClass("cc-calendar-current-day"),el.find(".cc-calendar-calendar tbody a").removeClass("cc-active"),me.addClass("cc-active")}),this.iscroll=new iScroll(el.find(".cc-calendar-content").get(0),$.extend({useTransition:!0,speedScale:1,topOffset:0},{onScrollStart:function(e){el.trigger("scrollstart",e)},onScrollMove:function(e){this.y<this.maxScrollY-50&&_this.pageIndex<opts.totalPage&&(_this.loading=!0),el.trigger("scrollmove",e)},onScrollEnd:function(e){_this._loadingAction(),el.trigger("scrollend",e)}}))},setState:function(flag){this.loading=flag},_loadingAction:function(){var me=this,opts=me._options,loadFn=opts.loadData;me.loading&&this.pageIndex<opts.totalPage&&($.isFunction(loadFn)&&loadFn(formatDate(me.lastDate)),this.pageIndex+=opts.perPage)},loadMonthData:function(priceData){var renderDate,drawYear,drawMonth,i,j,firstDay,leadDays,daysInMonth,rows,printDate,k,opts=this._options,tempDate=this.lastDate,nowYear=tempDate.getFullYear(),nowMonth=tempDate.getMonth(),today=new Date,minDate=this.minDate,maxDate=this.maxDate,selectedDate=this.date,html="";for(firstDay=isNaN(firstDay=parseInt(opts.firstDay,10))?0:firstDay,this.lastDate=new Date(nowYear,nowMonth+opts.perPage,1),k=0;k<opts.perPage;k++)for(renderDate=new Date(nowYear,nowMonth+k,1),drawYear=renderDate.getFullYear(),drawMonth=renderDate.getMonth(),html+='<tr><td colspan="7">'+this._renderHead(drawYear,drawMonth)+"</td></tr>",daysInMonth=getDaysInMonth(drawYear,drawMonth),leadDays=(getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7,rows=Math.ceil((leadDays+daysInMonth)/7),printDate=new Date(drawYear,drawMonth,1-leadDays),i=0;rows>i;i++){for(html+="<tr>",j=0;7>j;j++)html+=this._renderDay(j,printDate,firstDay,drawMonth,selectedDate,today,minDate,maxDate,priceData),printDate.setDate(printDate.getDate()+1);html+="</tr>"}this.$el.find(".cc-calendar-calendar").append(html),this.refresh()},refresh:function(){this.iscroll.refresh()},renderHtml:function(date,amount){var renderDate,drawYear,drawMonth,i,j,firstDay,day,leadDays,daysInMonth,rows,printDate,k,opts=this._options,tempDate=date,nowYear=tempDate.getFullYear(),nowMonth=tempDate.getMonth(),today=new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate()),minDate=this.minDate,maxDate=this.maxDate,selectedDate=this.date,html="";for(firstDay=isNaN(firstDay=parseInt(opts.firstDay,10))?0:firstDay,html+='<ul class="cc-calendar-week">',i=0;7>i;i++)day=(i+firstDay)%7,html+="<li"+((i+firstDay+6)%7>=5?' class="cc-calendar-week-end"':"")+"><span>"+dayNames[day]+"</span></li>";for(html+='</ul><div class="cc-calendar-content"><div><table  class="cc-calendar-calendar"><tbody>',this.lastDate=new Date(nowYear,nowMonth+amount,1),k=0;amount>k;k++)for(renderDate=new Date(nowYear,nowMonth+k,1),drawYear=renderDate.getFullYear(),drawMonth=renderDate.getMonth(),html+='<tr><td colspan="7">'+this._renderHead(drawYear,drawMonth)+"</td></tr>",daysInMonth=getDaysInMonth(drawYear,drawMonth),leadDays=(getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7,rows=Math.ceil((leadDays+daysInMonth)/7),printDate=new Date(drawYear,drawMonth,1-leadDays),i=0;rows>i;i++){for(html+="<tr>",j=0;7>j;j++)html+=this._renderDay(j,printDate,firstDay,drawMonth,selectedDate,today,minDate,maxDate,opts.datePrice),printDate.setDate(printDate.getDate()+1);html+="</tr>"}html+="</tbody></table></div></div>",this.$el.append(html)},_renderPrice:function(printDate,priceData){var date,output="";return priceData&&!$.isEmptyObject(priceData)&&priceData&&$.isPlainObject(priceData)&&$.each(priceData,function(k,v){return date=parseDate(k),printDate.getTime()===date.getTime()?(""!=v.price&&(output="&yen;"+v.price,v.id&&(output+='<input type="hidden" value="'+v.id+'">')),!1):void 0}),output},_renderHead:function(drawYear,drawMonth){var html='<div class="cc-calendar-header" data-date="'+drawYear+"-"+drawMonth+'-1">';return html+='<span class="cc-calendar-year" data-value="'+drawYear+'">'+drawYear+"年</span>",html+='<span class="cc-calendar-month" data-value="'+drawMonth+'">'+monthNames[drawMonth]+"</span>"},_renderDay:function(j,printDate,firstDay,drawMonth,selectedDate,today,minDate,maxDate,priceData){var unSelectable,priceDisplay,otherMonth=printDate.getMonth()!==drawMonth;return priceDisplay=this._renderPrice(printDate,priceData),unSelectable=otherMonth||minDate&&minDate>printDate||maxDate&&printDate>maxDate||!priceDisplay,"<td class='"+((j+firstDay+6)%7>=5?"cc-calendar-week-end":"")+(unSelectable?" cc-calendar-unSelectable cc-state-disabled":"")+(otherMonth||unSelectable?"":(printDate.getTime()===selectedDate.getTime()?" cc-calendar-current-day":"")+(printDate.getTime()===today.getTime()?" cc-calendar-today":""))+"'"+(unSelectable?"":" data-month='"+(printDate.getMonth()+1)+"' data-year='"+printDate.getFullYear()+"'")+">"+(otherMonth?"&#xa0;":unSelectable?"<span class='cc-state-default'>"+(printDate.getTime()===today.getTime()?"今天":printDate.getDate())+"</span>":"<a class='cc-state-default"+(printDate.getTime()===today.getTime()?" cc-state-highlight":"")+(printDate.getTime()===selectedDate.getTime()?" cc-state-active":"")+"' href='#' data-date='"+printDate.getDate()+"'>"+(printDate.getTime()===today.getTime()?"今天":printDate.getDate())+"<span class='cc-calendar-price'>"+priceDisplay+"</span></a>")+"</td>"}},$.fn.calendar=function(option,value){return this.each(function(){var $this=$(this),data=$this.data("calendar"),options=$.extend({},Calendar.DEFAULTS,"object"==typeof option&&option);data||$this.data("calendar",data=new Calendar(this,options)),"string"==typeof option&&data[option]&&data[option](value)})}}(jQuery),$(function(){$('[data-role="calendar"]').calendar()}),function($){var FormPassword=function($element,options){this.options=$.extend({},FormPassword.DEFAULTS,options||{}),this.element=$element,this.input=this.element.next("input").length?this.element.next("input"):this.element.closest(".input-row").find("input"),this.init()};FormPassword.DEFAULTS={showText:'<i class="cc-icon-eye f20 color-grayLight"></i>',hideText:'<i class="cc-icon-eye-o f20 color-grayLight"></i>'},FormPassword.prototype={init:function(){var $el=this.element,$input=this.input,me=this;$el.on("click",function(e){if(e.preventDefault(),$input.length){var type=$input.attr("type");$input.attr("type","text"==type?"password":"text"),$el.html(me.options["text"==type?"showText":"hideText"])}}),$el.html(me.options[$input.is("[type='password']")?"showText":"hideText"])}},$.fn.formPassword=function(settings){return this.each(function(){var that=$(this),plugin=that.data("formPassword");plugin||(plugin=new FormPassword(that,settings),that.data("formPassword",plugin))})}}(jQuery),$(function(){$('[data-role="password"]').formPassword()}),function($){var formatNumber=function(val,len){for(var num=""+val;num.length<len;)num="0"+num;return num};$.fn.countdown=function(options){var defaults={diffTime:0,attr:"data-time",finishText:"已结束",onFinish:function(){}},opts=$.extend(defaults,options||{});return this.each(function(){var nowTime,TS,D,H,M,S,MS,me=$(this),timestamp=parseInt(1e3*me.attr(opts.attr)),endTime=new Date(timestamp);setInterval(function(){if(nowTime=new Date,TS=endTime.getTime()-nowTime.getTime()+opts.diffTime,D=Math.floor(TS/864e5),H=Math.floor(TS/36e5)%24,M=Math.floor(TS/6e4)%60,S=Math.floor(TS/1e3)%60,MS=Math.floor(TS/100)%10,D>=0){D=0==D?"":formatNumber(D,2)+"天",H=0==H?"":formatNumber(H,2)+"小时",M=0==M?"":formatNumber(M,2)+"分",S=0==S?"":formatNumber(S,2)+"秒";var timeStr=D+H+M+S}else{var timeStr=opts.finishText;$.isFunction(opts.onFinish)&&opts.onFinish()}me.html(timeStr)},1e3)})}}(jQuery),$(function(){$('[data-role="countdown"]').countdown()}),function($){function isIosWeixin(){var ua=navigator.userAgent.toLowerCase();return"micromessenger"==ua.match(/MicroMessenger/i)&&ua.indexOf("iphone")>0?!0:!1}var lastAnimation=0,PageScroll=function(element,options){this.elem=$(element),this.settings=$.extend({},PageScroll.DEFAULTS,options),this.sections=$(this.settings.section,this.elem),this.total=this.sections.length,this.current=0,this.paginationList="",this.pagination=null,this.init(),this.bindEvents()};PageScroll.DEFAULTS={section:"section",animation:{easing:"ease",animationTime:1e3},waitingPeriod:0,beforeMove:null,afterMove:null,direction:"vertical",pagination:!0},PageScroll.prototype={init:function(){var me=this,el=this.elem,sections=me.sections,settings=me.settings,topPos=0,leftPos=0;el.addClass("section-wrapper").css({position:"relative",width:"100%",height:"100%","-webkit-transform-style":"preserve-3d","transform-style":"preserve-3d",display:"block"}),$.each(sections,function(i){if($(this).css({position:"absolute",top:topPos+"%"}).addClass("section").attr("data-index",i+1),$(this).css({width:"100%",height:"100%",position:"absolute",left:"horizontal"==settings.direction?leftPos+"%":0,top:"vertical"==settings.direction||"horizontal"!=settings.direction?topPos+"%":0}),"horizontal"==settings.direction?leftPos+=100:topPos+=100,1==settings.pagination){var activeClass=0==i?"active":"";me.paginationList+='<li class="'+activeClass+'"></li>'}}),1==settings.pagination&&(this.pagination=$("ul.page-scroll-pagination"),this.pagination.length<1&&(this.pagination=$("<ul class='page-scroll-pagination'></ul>").appendTo("body")),this.pagination.addClass(settings.direction).html(me.paginationList))},bindEvents:function(){var me=this,settings=this.settings,hammer=new Hammer(this.elem.get(0));hammer.on("vertical"==settings.direction?"panup":"panright",function(e){me.movePage("next")}),hammer.on("vertical"==settings.direction?"pandown":"panleft",function(e){me.movePage("prev")})},movePage:function(direction){function doneFun(){$.isFunction(settings.afterMove)&&settings.afterMove(me.current+1)}if(!("next"==direction&&this.current==this.total-1||"prev"==direction&&0==this.current)){var me=this,ele=this.elem,settings=this.settings,timeNow=(new Date).getTime();if(!(timeNow-lastAnimation<settings.waitingPeriod+settings.animation.animationTime)){lastAnimation=timeNow,"next"==direction?me.current++:me.current--;var pos=100*me.current*-1;if($.isFunction(settings.beforeMove)&&settings.beforeMove(me.current+1),isIosWeixin())if("horizontal"==settings.direction){var toppos=ele.width()/100*pos;ele.animate({left:toppos+"px"},settings.animation.animationTime,function(){doneFun()})}else{var toppos=ele.height()/100*pos;ele.animate({top:toppos+"px"},settings.animation.animationTime,function(){doneFun()})}else ele.css({"-webkit-transform":"horizontal"==settings.direction?"translate3d("+pos+"%, 0, 0)":"translate3d(0, "+pos+"%, 0)","-webkit-transition":"all "+settings.animation.animationTime+"ms "+settings.animation.easing,"-moz-transform":"horizontal"==settings.direction?"translate3d("+pos+"%, 0, 0)":"translate3d(0, "+pos+"%, 0)","-moz-transition":"all "+settings.animation.animationTime+"ms "+settings.animation.easing,"-ms-transform":"horizontal"==settings.direction?"translate3d("+pos+"%, 0, 0)":"translate3d(0, "+pos+"%, 0)","-ms-transition":"all "+settings.animation.animationTime+"ms "+settings.animation.easing,transform:"horizontal"==settings.direction?"translate3d("+pos+"%, 0, 0)":"translate3d(0, "+pos+"%, 0)",transition:"all "+settings.animation.animationTime+"ms "+settings.animation.easing}),ele.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(e){doneFun()});this.pagination.find("li").eq(this.current).addClass("active").siblings().removeClass("active")}}},prev:function(){this.movePage("prev")},next:function(){this.movePage("next")}},$.fn.page_scroll=function(option,value){return this.each(function(){var $this=$(this),data=$this.data("page_scroll"),options=$.extend({},"object"==typeof option?option:{});data||$this.data("page_scroll",data=new PageScroll(this,options)),"string"==typeof option&&data[option](value)})}}(window.jQuery||window.Zepto),function(){function InfiniteScroll(elem,options){this.$elem=$(elem),this.options=$.extend({},InfiniteScroll.DEFAULTS,options||{}),this.bind()}InfiniteScroll.DEFAULTS={distance:50,direction:"bottom"},InfiniteScroll.prototype={handleInfiniteScroll:function(){var distance,dir,inf=this.$elem,scrollTop=inf[0].scrollTop,scrollHeight=inf[0].scrollHeight,height=inf[0].offsetHeight;inf.is($(window))||(distance=inf[0].getAttribute("data-distance"),dir=inf[0].getAttribute("data-direction")),distance||(distance=this.options.distance),dir||(dir=this.options.direction),"string"==typeof distance&&distance.indexOf("%")>=0&&(distance=parseInt(distance,10)/100*height),distance>height&&(distance=height),"top"==dir?distance>scrollTop&&inf.trigger("infinite",[dir]):scrollTop+height>=scrollHeight-distance&&inf.trigger("infinite",[dir])},bind:function(){this.$elem.on("scroll.infinite",$.proxy(function(){this.handleInfiniteScroll()},this))},unbind:function(){this.$elem.off("scroll.infinite")}},$.fn.infiniteScroll=function(option){return this.each(function(){var $this=$(this),data=$this.data("infiniteScroll"),options=$.extend({},InfiniteScroll.DEFAULTS,"object"==typeof option&&option);data||$this.data("infiniteScroll",data=new InfiniteScroll(this,options)),"string"==typeof option&&data[option]&&data[option]()})}}(jQuery),function(){"use strict";function Waypoint(options){if(!options)throw new Error("No options passed to Waypoint constructor");if(!options.element)throw new Error("No element option passed to Waypoint constructor");if(!options.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+keyCounter,this.options=Waypoint.Adapter.extend({},Waypoint.defaults,options),this.element=this.options.element,this.adapter=new Waypoint.Adapter(this.element),this.callback=options.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=Waypoint.Group.findOrCreate({name:this.options.group,axis:this.axis
}),this.context=Waypoint.Context.findOrCreateByElement(this.options.context),Waypoint.offsetAliases[this.options.offset]&&(this.options.offset=Waypoint.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),allWaypoints[this.key]=this,keyCounter+=1}var keyCounter=0,allWaypoints={};Waypoint.prototype.queueTrigger=function(direction){this.group.queueTrigger(this,direction)},Waypoint.prototype.trigger=function(args){this.enabled&&this.callback&&this.callback.apply(this,args)},Waypoint.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete allWaypoints[this.key]},Waypoint.prototype.disable=function(){return this.enabled=!1,this},Waypoint.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},Waypoint.prototype.next=function(){return this.group.next(this)},Waypoint.prototype.previous=function(){return this.group.previous(this)},Waypoint.invokeAll=function(method){var allWaypointsArray=[];for(var waypointKey in allWaypoints)allWaypointsArray.push(allWaypoints[waypointKey]);for(var i=0,end=allWaypointsArray.length;end>i;i++)allWaypointsArray[i][method]()},Waypoint.destroyAll=function(){Waypoint.invokeAll("destroy")},Waypoint.disableAll=function(){Waypoint.invokeAll("disable")},Waypoint.enableAll=function(){Waypoint.invokeAll("enable")},Waypoint.refreshAll=function(){Waypoint.Context.refreshAll()},Waypoint.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},Waypoint.viewportWidth=function(){return document.documentElement.clientWidth},Waypoint.adapters=[],Waypoint.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},Waypoint.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=Waypoint}(),function(){"use strict";function requestAnimationFrameShim(callback){window.setTimeout(callback,1e3/60)}function Context(element){this.element=element,this.Adapter=Waypoint.Adapter,this.adapter=new this.Adapter(element),this.key="waypoint-context-"+keyCounter,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},element.waypointContextKey=this.key,contexts[element.waypointContextKey]=this,keyCounter+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var keyCounter=0,contexts={},Waypoint=window.Waypoint,oldWindowLoad=window.onload;Context.prototype.add=function(waypoint){var axis=waypoint.options.horizontal?"horizontal":"vertical";this.waypoints[axis][waypoint.key]=waypoint,this.refresh()},Context.prototype.checkEmpty=function(){var horizontalEmpty=this.Adapter.isEmptyObject(this.waypoints.horizontal),verticalEmpty=this.Adapter.isEmptyObject(this.waypoints.vertical);horizontalEmpty&&verticalEmpty&&(this.adapter.off(".waypoints"),delete contexts[this.key])},Context.prototype.createThrottledResizeHandler=function(){function resizeHandler(){self.handleResize(),self.didResize=!1}var self=this;this.adapter.on("resize.waypoints",function(){self.didResize||(self.didResize=!0,Waypoint.requestAnimationFrame(resizeHandler))})},Context.prototype.createThrottledScrollHandler=function(){function scrollHandler(){self.handleScroll(),self.didScroll=!1}var self=this;this.adapter.on("scroll.waypoints",function(){(!self.didScroll||Waypoint.isTouch)&&(self.didScroll=!0,Waypoint.requestAnimationFrame(scrollHandler))})},Context.prototype.handleResize=function(){Waypoint.Context.refreshAll()},Context.prototype.handleScroll=function(){var triggeredGroups={},axes={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var axisKey in axes){var axis=axes[axisKey],isForward=axis.newScroll>axis.oldScroll,direction=isForward?axis.forward:axis.backward;for(var waypointKey in this.waypoints[axisKey]){var waypoint=this.waypoints[axisKey][waypointKey],wasBeforeTriggerPoint=axis.oldScroll<waypoint.triggerPoint,nowAfterTriggerPoint=axis.newScroll>=waypoint.triggerPoint,crossedForward=wasBeforeTriggerPoint&&nowAfterTriggerPoint,crossedBackward=!wasBeforeTriggerPoint&&!nowAfterTriggerPoint;(crossedForward||crossedBackward)&&(waypoint.queueTrigger(direction),triggeredGroups[waypoint.group.id]=waypoint.group)}}for(var groupKey in triggeredGroups)triggeredGroups[groupKey].flushTriggers();this.oldScroll={x:axes.horizontal.newScroll,y:axes.vertical.newScroll}},Context.prototype.innerHeight=function(){return this.element==this.element.window?Waypoint.viewportHeight():this.adapter.innerHeight()},Context.prototype.remove=function(waypoint){delete this.waypoints[waypoint.axis][waypoint.key],this.checkEmpty()},Context.prototype.innerWidth=function(){return this.element==this.element.window?Waypoint.viewportWidth():this.adapter.innerWidth()},Context.prototype.destroy=function(){var allWaypoints=[];for(var axis in this.waypoints)for(var waypointKey in this.waypoints[axis])allWaypoints.push(this.waypoints[axis][waypointKey]);for(var i=0,end=allWaypoints.length;end>i;i++)allWaypoints[i].destroy()},Context.prototype.refresh=function(){var axes,isWindow=this.element==this.element.window,contextOffset=isWindow?void 0:this.adapter.offset(),triggeredGroups={};this.handleScroll(),axes={horizontal:{contextOffset:isWindow?0:contextOffset.left,contextScroll:isWindow?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:isWindow?0:contextOffset.top,contextScroll:isWindow?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var axisKey in axes){var axis=axes[axisKey];for(var waypointKey in this.waypoints[axisKey]){var contextModifier,wasBeforeScroll,nowAfterScroll,triggeredBackward,triggeredForward,waypoint=this.waypoints[axisKey][waypointKey],adjustment=waypoint.options.offset,oldTriggerPoint=waypoint.triggerPoint,elementOffset=0,freshWaypoint=null==oldTriggerPoint;waypoint.element!==waypoint.element.window&&(elementOffset=waypoint.adapter.offset()[axis.offsetProp]),"function"==typeof adjustment?adjustment=adjustment.apply(waypoint):"string"==typeof adjustment&&(adjustment=parseFloat(adjustment),waypoint.options.offset.indexOf("%")>-1&&(adjustment=Math.ceil(axis.contextDimension*adjustment/100))),contextModifier=axis.contextScroll-axis.contextOffset,waypoint.triggerPoint=elementOffset+contextModifier-adjustment,wasBeforeScroll=oldTriggerPoint<axis.oldScroll,nowAfterScroll=waypoint.triggerPoint>=axis.oldScroll,triggeredBackward=wasBeforeScroll&&nowAfterScroll,triggeredForward=!wasBeforeScroll&&!nowAfterScroll,!freshWaypoint&&triggeredBackward?(waypoint.queueTrigger(axis.backward),triggeredGroups[waypoint.group.id]=waypoint.group):!freshWaypoint&&triggeredForward?(waypoint.queueTrigger(axis.forward),triggeredGroups[waypoint.group.id]=waypoint.group):freshWaypoint&&axis.oldScroll>=waypoint.triggerPoint&&(waypoint.queueTrigger(axis.forward),triggeredGroups[waypoint.group.id]=waypoint.group)}}return Waypoint.requestAnimationFrame(function(){for(var groupKey in triggeredGroups)triggeredGroups[groupKey].flushTriggers()}),this},Context.findOrCreateByElement=function(element){return Context.findByElement(element)||new Context(element)},Context.refreshAll=function(){for(var contextId in contexts)contexts[contextId].refresh()},Context.findByElement=function(element){return contexts[element.waypointContextKey]},window.onload=function(){oldWindowLoad&&oldWindowLoad(),Context.refreshAll()},Waypoint.requestAnimationFrame=function(callback){var requestFn=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||requestAnimationFrameShim;requestFn.call(window,callback)},Waypoint.Context=Context}(),function(){"use strict";function byTriggerPoint(a,b){return a.triggerPoint-b.triggerPoint}function byReverseTriggerPoint(a,b){return b.triggerPoint-a.triggerPoint}function Group(options){this.name=options.name,this.axis=options.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),groups[this.axis][this.name]=this}var groups={vertical:{},horizontal:{}},Waypoint=window.Waypoint;Group.prototype.add=function(waypoint){this.waypoints.push(waypoint)},Group.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},Group.prototype.flushTriggers=function(){for(var direction in this.triggerQueues){var waypoints=this.triggerQueues[direction],reverse="up"===direction||"left"===direction;waypoints.sort(reverse?byReverseTriggerPoint:byTriggerPoint);for(var i=0,end=waypoints.length;end>i;i+=1){var waypoint=waypoints[i];(waypoint.options.continuous||i===waypoints.length-1)&&waypoint.trigger([direction])}}this.clearTriggerQueues()},Group.prototype.next=function(waypoint){this.waypoints.sort(byTriggerPoint);var index=Waypoint.Adapter.inArray(waypoint,this.waypoints),isLast=index===this.waypoints.length-1;return isLast?null:this.waypoints[index+1]},Group.prototype.previous=function(waypoint){this.waypoints.sort(byTriggerPoint);var index=Waypoint.Adapter.inArray(waypoint,this.waypoints);return index?this.waypoints[index-1]:null},Group.prototype.queueTrigger=function(waypoint,direction){this.triggerQueues[direction].push(waypoint)},Group.prototype.remove=function(waypoint){var index=Waypoint.Adapter.inArray(waypoint,this.waypoints);index>-1&&this.waypoints.splice(index,1)},Group.prototype.first=function(){return this.waypoints[0]},Group.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},Group.findOrCreate=function(options){return groups[options.axis][options.name]||new Group(options)},Waypoint.Group=Group}(),function(){"use strict";function JQueryAdapter(element){this.$element=$(element)}var $=window.jQuery,Waypoint=window.Waypoint;$.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(i,method){JQueryAdapter.prototype[method]=function(){var args=Array.prototype.slice.call(arguments);return this.$element[method].apply(this.$element,args)}}),$.each(["extend","inArray","isEmptyObject"],function(i,method){JQueryAdapter[method]=$[method]}),Waypoint.adapters.push({name:"jquery",Adapter:JQueryAdapter}),Waypoint.Adapter=JQueryAdapter}(),function(){"use strict";function createExtension(framework){return function(){var waypoints=[],overrides=arguments[0];return framework.isFunction(arguments[0])&&(overrides=framework.extend({},arguments[1]),overrides.handler=arguments[0]),this.each(function(){var options=framework.extend({},overrides,{element:this});"string"==typeof options.context&&(options.context=framework(this).closest(options.context)[0]),waypoints.push(new Waypoint(options))}),waypoints}}var Waypoint=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=createExtension(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=createExtension(window.Zepto))}(),function(){"use strict";function Infinite(options){this.options=$.extend({},Infinite.defaults,options),this.container=this.options.element,"auto"!==this.options.container&&(this.container=this.options.container),this.$container=$(this.container),this.$more=$(this.options.more),this.$more.length&&(this.setupHandler(),this.waypoint=new Waypoint(this.options))}var $=window.jQuery,Waypoint=window.Waypoint;Infinite.prototype.setupHandler=function(){this.options.handler=$.proxy(function(){this.options.onBeforePageLoad(),this.destroy(),this.$container.addClass(this.options.loadingClass),$.ajax({url:$(this.options.more).attr("href"),beforeSend:function(){$("#cc-loading").hide()},success:$.proxy(function(data){var $data=$($.parseHTML(data)),$newMore=$data.find(this.options.more),$items=$data.find(this.options.items);$items.length||($items=$data.filter(this.options.items)),this.$container.append($items),this.$container.removeClass(this.options.loadingClass),$newMore.length||($newMore=$data.filter(this.options.more)),$newMore.length?(this.$more.replaceWith($newMore),this.$more=$newMore,this.waypoint=new Waypoint(this.options)):this.$more.remove(),this.options.onAfterPageLoad($items)},this)})},this)},Infinite.prototype.destroy=function(){this.waypoint&&this.waypoint.destroy()},Infinite.defaults={container:"auto",items:".infinite-item",more:".infinite-more-link",offset:"bottom-in-view",loadingClass:"infinite-loading",onBeforePageLoad:$.noop,onAfterPageLoad:$.noop},Waypoint.Infinite=Infinite}(),window.onerror=function(message,url,line){if(url){var msgStr,msg={},msgArr=[];msg.ua=window.navigator.userAgent,msg.message=message.message,msg.url=url,msg.line=line,msg.page=window.location.href;for(var key in msg)msgArr.push(key+"="+msg[key]);msgStr=msgArr.join("\n")}},window.onload=function(){setTimeout(function(){window.scrollTo(0,1)},0)},$(function(){var $loading=$("#cc-loading");$(window).load(function(){$loading.delay(100).fadeOut("slow")}),$(document).on("ajaxStart",function(){$loading.show()}),$(document).on("ajaxComplete",function(){$loading.fadeOut()}),$("[data-back]").on("click",function(){return window.history.go(-1),!1}),echo.init({offset:100,throttle:250,unload:!1,callback:function(element,op){}});var topElement=(new Waypoint.Infinite({element:$(".infinite-container")[0],onAfterPageLoad:function($items){echo.refresh(),($items.find('[data-role="pureview"]').length||$items.is('[data-role="pureview"]'))&&$('[data-role="pureview"]').pureview()}}),$('[data-role="gotop"]')),offTop=50,gotTopTpl=['<div class="cc-top" data-role="gotop">','<span class="arrow"></span>',"顶部","</div>"].join("");topElement.length||(topElement=$(gotTopTpl).appendTo("body")),$(window).on("scroll",$.debounce(function(){var me=$(this),scrollTop=me.scrollTop();scrollTop>offTop?topElement.addClass("cc-active"):topElement.removeClass("cc-active")},50)).trigger("scroll")});